{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\kouki\\\\my-app\\\\src\\\\ManagerCreate.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ManagerCreate() {\n  _s();\n  const [shiftData, setShiftData] = useState([]);\n  const [userMap, setUserMap] = useState({});\n  const [dates, setDates] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      // 固定の期間を設定（例として1ヶ月分）\n      const startDate = '2025-07-01';\n      const endDate = '2025-07-31';\n      const {\n        data: shifts,\n        error: shiftError\n      } = await supabase.from('shifts').select('*').gte('date', startDate).lte('date', endDate);\n      if (shiftError) {\n        console.error(shiftError);\n        alert('シフトデータの取得に失敗しました');\n        return;\n      }\n      const {\n        data: users,\n        error: userError\n      } = await supabase.from('users').select('*');\n      if (userError) {\n        console.error(userError);\n        alert('ユーザー情報の取得に失敗しました');\n        return;\n      }\n      const userMapTemp = {};\n      users.forEach(user => {\n        userMapTemp[user.manager_number] = user.name;\n      });\n\n      // 全日付を生成\n      const allDates = [];\n      const d = new Date(startDate);\n      while (d <= new Date(endDate)) {\n        allDates.push(d.toISOString().split('T')[0]);\n        d.setDate(d.getDate() + 1);\n      }\n      setDates(allDates);\n      setUserMap(userMapTemp);\n      setShiftData(shifts);\n    };\n    fetchData();\n  }, []);\n  const groupedByUser = {};\n  shiftData.forEach(shift => {\n    const name = userMap[shift.manager_number] || '(不明)';\n    if (!groupedByUser[name]) groupedByUser[name] = {};\n    groupedByUser[name][shift.date] = `${shift.start_time || ''} ~ ${shift.end_time || ''}`;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '1rem',\n      width: '100vw',\n      height: '100vh',\n      overflow: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        borderCollapse: 'collapse',\n        width: '100%',\n        tableLayout: 'fixed'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              border: '1px solid #ccc',\n              padding: '0.5rem',\n              minWidth: '100px'\n            },\n            children: \"\\u540D\\u524D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), dates.map(date => /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              border: '1px solid #ccc',\n              padding: '0.5rem',\n              writingMode: 'vertical-rl',\n              textAlign: 'center',\n              minWidth: '40px'\n            },\n            children: date\n          }, date, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: Object.entries(groupedByUser).map(([name, shifts]) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: '1px solid #ccc',\n              padding: '0.5rem',\n              whiteSpace: 'nowrap'\n            },\n            children: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), dates.map(date => /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: '1px solid #ccc',\n              padding: '0.5rem',\n              textAlign: 'center',\n              fontSize: '0.75rem',\n              whiteSpace: 'nowrap'\n            },\n            children: shifts[date] || ''\n          }, date, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this))]\n        }, name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(ManagerCreate, \"43XlygXOyPF1XfyOcCXp2oVmRSQ=\");\n_c = ManagerCreate;\nexport default ManagerCreate;\nvar _c;\n$RefreshReg$(_c, \"ManagerCreate\");","map":{"version":3,"names":["React","useState","useEffect","supabase","jsxDEV","_jsxDEV","ManagerCreate","_s","shiftData","setShiftData","userMap","setUserMap","dates","setDates","fetchData","startDate","endDate","data","shifts","error","shiftError","from","select","gte","lte","console","alert","users","userError","userMapTemp","forEach","user","manager_number","name","allDates","d","Date","push","toISOString","split","setDate","getDate","groupedByUser","shift","date","start_time","end_time","style","padding","width","height","overflow","children","borderCollapse","tableLayout","border","minWidth","fileName","_jsxFileName","lineNumber","columnNumber","map","writingMode","textAlign","Object","entries","whiteSpace","fontSize","_c","$RefreshReg$"],"sources":["c:/Users/kouki/my-app/src/ManagerCreate.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\n\r\nfunction ManagerCreate() {\r\n  const [shiftData, setShiftData] = useState([]);\r\n  const [userMap, setUserMap] = useState({});\r\n  const [dates, setDates] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      // 固定の期間を設定（例として1ヶ月分）\r\n      const startDate = '2025-07-01';\r\n      const endDate = '2025-07-31';\r\n\r\n      const { data: shifts, error: shiftError } = await supabase\r\n        .from('shifts')\r\n        .select('*')\r\n        .gte('date', startDate)\r\n        .lte('date', endDate);\r\n\r\n      if (shiftError) {\r\n        console.error(shiftError);\r\n        alert('シフトデータの取得に失敗しました');\r\n        return;\r\n      }\r\n\r\n      const { data: users, error: userError } = await supabase\r\n        .from('users')\r\n        .select('*');\r\n\r\n      if (userError) {\r\n        console.error(userError);\r\n        alert('ユーザー情報の取得に失敗しました');\r\n        return;\r\n      }\r\n\r\n      const userMapTemp = {};\r\n      users.forEach(user => {\r\n        userMapTemp[user.manager_number] = user.name;\r\n      });\r\n\r\n      // 全日付を生成\r\n      const allDates = [];\r\n      const d = new Date(startDate);\r\n      while (d <= new Date(endDate)) {\r\n        allDates.push(d.toISOString().split('T')[0]);\r\n        d.setDate(d.getDate() + 1);\r\n      }\r\n\r\n      setDates(allDates);\r\n      setUserMap(userMapTemp);\r\n      setShiftData(shifts);\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const groupedByUser = {};\r\n  shiftData.forEach(shift => {\r\n    const name = userMap[shift.manager_number] || '(不明)';\r\n    if (!groupedByUser[name]) groupedByUser[name] = {};\r\n    groupedByUser[name][shift.date] = `${shift.start_time || ''} ~ ${shift.end_time || ''}`;\r\n  });\r\n\r\n  return (\r\n    <div style={{ padding: '1rem', width: '100vw', height: '100vh', overflow: 'auto' }}>\r\n      <table style={{ borderCollapse: 'collapse', width: '100%', tableLayout: 'fixed' }}>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ border: '1px solid #ccc', padding: '0.5rem', minWidth: '100px' }}>名前</th>\r\n            {dates.map(date => (\r\n              <th key={date} style={{ border: '1px solid #ccc', padding: '0.5rem', writingMode: 'vertical-rl', textAlign: 'center', minWidth: '40px' }}>\r\n                {date}\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {Object.entries(groupedByUser).map(([name, shifts]) => (\r\n            <tr key={name}>\r\n              <td style={{ border: '1px solid #ccc', padding: '0.5rem', whiteSpace: 'nowrap' }}>{name}</td>\r\n              {dates.map(date => (\r\n                <td key={date} style={{ border: '1px solid #ccc', padding: '0.5rem', textAlign: 'center', fontSize: '0.75rem', whiteSpace: 'nowrap' }}>\r\n                  {shifts[date] || ''}\r\n                </td>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManagerCreate;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}