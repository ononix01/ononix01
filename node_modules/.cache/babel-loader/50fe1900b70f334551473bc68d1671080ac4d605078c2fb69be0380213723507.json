{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kouki\\\\my-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, getDoc, collection, query, onSnapshot, addDoc } from 'firebase/firestore';\n\n// --- Firebase & Utility Setup ---\n\n// Firebase設定の取得と初期化\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-shift-app';\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\n/**\n * 認証ステータスの表示（デバッグ用）\n * @param {string} userId - 現在のユーザーID\n * @returns {JSX.Element}\n */\nconst AuthStatus = ({\n  userId,\n  isManager\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"text-xs p-2 bg-gray-700 text-gray-300 rounded-lg shadow-inner mb-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"App ID:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 12\n    }, this), \" \", appId]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"\\u30E6\\u30FC\\u30B6\\u30FCID:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }, this), \" \", userId]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"\\u30ED\\u30FC\\u30EB:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n      className: isManager ? \"text-yellow-400 font-bold\" : \"text-green-400 font-bold\",\n      children: isManager ? 'マネージャー' : 'スタッフ'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 34\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 34,\n  columnNumber: 5\n}, this);\n\n/**\n * 遅延リトライ関数 (Exponential Backoff)\n * @param {Function} apiCall - 実行する非同期API関数\n * @param {number} maxRetries - 最大リトライ回数\n * @returns {Promise<any>}\n */\n_c = AuthStatus;\nconst withRetry = async (apiCall, maxRetries = 5) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await apiCall();\n    } catch (error) {\n      if (i === maxRetries - 1) {\n        console.error(\"API呼び出しが最大リトライ回数に達しました。\", error);\n        throw error;\n      }\n      const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n};\n\n// --- View Components (Internal) ---\n\n/**\n * ログイン/初期認証画面\n */\nconst LoginScreen = ({\n  auth,\n  setView,\n  isAuthReady\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex flex-col items-center justify-center h-full\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6 text-center\",\n      children: \"\\u30B7\\u30D5\\u30C8\\u7BA1\\u7406\\u30B7\\u30B9\\u30C6\\u30E0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-600 mb-8\",\n      children: \"\\u30B7\\u30B9\\u30C6\\u30E0\\u3092\\u5229\\u7528\\u3059\\u308B\\u306B\\u306F\\u3001\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\\u304C\\u5FC5\\u8981\\u3067\\u3059\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), isAuthReady ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setView('RegisterUser'),\n        className: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] mb-4\",\n        children: \"\\u65B0\\u898F\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u767B\\u9332\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async () => {\n          // 匿名サインインは通常、新規登録フローの一部ですが、\n          // ここでは、認証が完了していない場合の代替手段として残します。\n          try {\n            await withRetry(() => signInAnonymously(auth));\n          } catch (error) {\n            console.error(\"匿名サインインエラー:\", error);\n          }\n        },\n        className: \"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300\",\n        children: \"\\u533F\\u540D\\u3067\\u7D9A\\u884C (\\u30C7\\u30D0\\u30C3\\u30B0/\\u30C6\\u30B9\\u30C8)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-3 text-indigo-600\",\n        children: \"\\u8A8D\\u8A3C\\u6E96\\u5099\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 70,\n  columnNumber: 5\n}, this);\n\n/**\n * ユーザー登録画面 (Firebaseには登録機能がないため、ここではFirestoreにロールを保存する処理を行う)\n */\n_c2 = LoginScreen;\nconst RegisterUser = ({\n  db,\n  userId,\n  setView,\n  setLoading,\n  setError\n}) => {\n  _s();\n  const [name, setName] = useState('');\n  const [role, setRole] = useState('staff');\n  const handleRegister = async () => {\n    if (!name || !userId) {\n      setError('名前とユーザーIDが必要です。');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/profile/data`);\n      await withRetry(() => setDoc(userDocRef, {\n        name: name,\n        role: role,\n        userId: userId,\n        createdAt: new Date().toISOString()\n      }, {\n        merge: true\n      }));\n\n      // 登録後、自動でホームビューに戻る\n      setView(role === 'manager' ? 'ManagerShiftView' : 'StaffShiftView');\n    } catch (e) {\n      console.error(\"ユーザー登録エラー:\", e);\n      setError(`登録に失敗しました: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-gray-800\",\n      children: \"\\u65B0\\u898F\\u30E6\\u30FC\\u30B6\\u30FC\\u767B\\u9332\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 font-medium mb-2\",\n        htmlFor: \"name\",\n        children: \"\\u6C0F\\u540D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"name\",\n        type: \"text\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\",\n        placeholder: \"\\u3042\\u306A\\u305F\\u306E\\u540D\\u524D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 font-medium mb-2\",\n        children: \"\\u5F79\\u5272\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"inline-flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            className: \"form-radio text-indigo-600 h-5 w-5\",\n            name: \"role\",\n            value: \"staff\",\n            checked: role === 'staff',\n            onChange: () => setRole('staff')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 text-gray-700\",\n            children: \"\\u30B9\\u30BF\\u30C3\\u30D5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"inline-flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            className: \"form-radio text-indigo-600 h-5 w-5\",\n            name: \"role\",\n            value: \"manager\",\n            checked: role === 'manager',\n            onChange: () => setRole('manager')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 text-gray-700\",\n            children: \"\\u30DE\\u30CD\\u30FC\\u30B8\\u30E3\\u30FC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleRegister,\n      className: \"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300\",\n      disabled: !name || !userId,\n      children: \"\\u767B\\u9332\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => signOut(getAuth(initializeApp(firebaseConfig))),\n      className: \"mt-4 w-full text-sm text-gray-500 hover:text-gray-700\",\n      children: \"\\u5225\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3067\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 9\n  }, this);\n};\n\n/**\n * マネージャー：シフト作成画面\n */\n_s(RegisterUser, \"pIx+FpKJak3qwksjTT/KrKE4toI=\");\n_c3 = RegisterUser;\nconst ManagerCreate = ({\n  db,\n  userId,\n  setError,\n  setLoading,\n  userProfile,\n  setSuccessMessage\n}) => {\n  _s2();\n  const [shiftDate, setShiftDate] = useState('');\n  const [startTime, setStartTime] = useState('09:00');\n  const [endTime, setEndTime] = useState('17:00');\n  const [requiredStaff, setRequiredStaff] = useState(1);\n  const [description, setDescription] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccessMessage(null); // 新しい処理の開始時に成功メッセージもクリア\n\n    if (!shiftDate || !startTime || !endTime || requiredStaff < 1) {\n      setError('全て必須項目を入力してください。');\n      setLoading(false);\n      return;\n    }\n    try {\n      const shiftData = {\n        date: shiftDate,\n        startTime: startTime,\n        endTime: endTime,\n        requiredStaff: requiredStaff,\n        description: description,\n        managerId: userId,\n        managerName: userProfile.name || '不明なマネージャー',\n        assignedStaff: [],\n        // 割り当てられたスタッフのIDリスト\n        status: 'open',\n        createdAt: new Date().toISOString()\n      };\n      const shiftsColRef = collection(db, `artifacts/${appId}/public/data/shifts`);\n      await withRetry(() => addDoc(shiftsColRef, shiftData));\n      setSuccessMessage('新しいシフトが正常に作成されました！');\n      // フォームのリセット\n      setShiftDate('');\n      setRequiredStaff(1);\n      setDescription('');\n    } catch (e) {\n      console.error(\"シフト作成エラー:\", e);\n      setError(`シフトの作成に失敗しました: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-indigo-700\",\n      children: \"\\u65B0\\u898F\\u30B7\\u30D5\\u30C8\\u306E\\u4F5C\\u6210\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4 bg-white p-6 rounded-xl shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 font-medium mb-1\",\n          children: \"\\u65E5\\u4ED8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: shiftDate,\n          onChange: e => setShiftDate(e.target.value),\n          className: \"w-full p-3 border border-gray-300 rounded-lg\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 font-medium mb-1\",\n            children: \"\\u958B\\u59CB\\u6642\\u523B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            value: startTime,\n            onChange: e => setStartTime(e.target.value),\n            className: \"w-full p-3 border border-gray-300 rounded-lg\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 font-medium mb-1\",\n            children: \"\\u7D42\\u4E86\\u6642\\u523B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            value: endTime,\n            onChange: e => setEndTime(e.target.value),\n            className: \"w-full p-3 border border-gray-300 rounded-lg\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 font-medium mb-1\",\n          children: \"\\u5FC5\\u8981\\u30B9\\u30BF\\u30C3\\u30D5\\u6570\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"1\",\n          value: requiredStaff,\n          onChange: e => setRequiredStaff(Math.max(1, parseInt(e.target.value))),\n          className: \"w-full p-3 border border-gray-300 rounded-lg\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 font-medium mb-1\",\n          children: \"\\u8AAC\\u660E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          className: \"w-full p-3 border border-gray-300 rounded-lg resize-none\",\n          rows: \"3\",\n          placeholder: \"\\u7279\\u5225\\u306A\\u6307\\u793A\\u3084\\u5834\\u6240\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300\",\n        children: \"\\u30B7\\u30D5\\u30C8\\u3092\\u516C\\u958B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 9\n  }, this);\n};\n\n/**\n * シフトリストアイテムの共通コンポーネント\n * @param {object} shift - シフトデータ\n * @param {boolean} isManager - マネージャーかどうか\n * @param {Function} handleAction - アクションボタンのハンドラ\n * @returns {JSX.Element}\n */\n_s2(ManagerCreate, \"/iR+Iy8YGzSHvL5b1qjRDAHnGqM=\");\n_c4 = ManagerCreate;\nconst ShiftListItem = ({\n  shift,\n  isManager,\n  handleAction\n}) => {\n  const isAssigned = shift.assignedStaff.includes(shift.currentUserId); // currentUserIdはApp.jsxから渡される想定\n  const isFull = shift.assignedStaff.length >= shift.requiredStaff;\n  const staffCount = shift.assignedStaff.length;\n  const actionText = isManager ? \"詳細/編集\" : isAssigned ? \"キャンセル\" : isFull ? \"満員\" : \"応募\";\n  const actionColor = isManager ? \"bg-blue-500 hover:bg-blue-600\" : isAssigned ? \"bg-red-500 hover:bg-red-600\" : isFull ? \"bg-gray-400\" : \"bg-green-500 hover:bg-green-600\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-5 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition duration-200 flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl font-semibold text-gray-800\",\n        children: shift.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600\",\n        children: [shift.startTime, \" - \", shift.endTime, \" (\", shift.managerName, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500 mt-1\",\n        children: shift.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-3 py-1 text-sm font-bold rounded-full ${isFull ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`,\n        children: [staffCount, \"/\", shift.requiredStaff, \" \\u540D\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAction(shift),\n        className: `text-white font-medium py-2 px-4 rounded-lg transition duration-200 ${actionColor} ${!isManager && isFull && !isAssigned ? 'opacity-50 cursor-not-allowed' : ''}`,\n        disabled: !isManager && isFull && !isAssigned,\n        children: actionText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 9\n  }, this);\n};\n\n/**\n * スタッフ：シフト閲覧画面 (応募/キャンセル機能付き)\n */\n_c5 = ShiftListItem;\nconst StaffShiftView = ({\n  shifts,\n  userId,\n  db,\n  appId,\n  setLoading,\n  setError,\n  setView\n}) => {\n  const handleAction = async shift => {\n    if (shift.status !== 'open') return; // 公開されていないシフトは操作不可\n\n    const isAssigned = shift.assignedStaff.includes(userId);\n    const shiftDocRef = doc(db, `artifacts/${appId}/public/data/shifts`, shift.id);\n    setLoading(true);\n    setError(null);\n    try {\n      let newAssignedStaff = [...shift.assignedStaff];\n      if (isAssigned) {\n        // キャンセル\n        newAssignedStaff = newAssignedStaff.filter(id => id !== userId);\n      } else {\n        // 応募 (満員チェックはUIで実施済みだが念のためサーバー側でも)\n        if (newAssignedStaff.length < shift.requiredStaff) {\n          newAssignedStaff.push(userId);\n        } else {\n          setError('このシフトは既に満員です。');\n          setLoading(false);\n          return;\n        }\n      }\n      await withRetry(() => setDoc(shiftDocRef, {\n        assignedStaff: newAssignedStaff\n      }, {\n        merge: true\n      }));\n      // alert(`シフトを${isAssigned ? 'キャンセル' : '応募'}しました！`);\n    } catch (e) {\n      console.error(\"シフト操作エラー:\", e);\n      setError(`操作に失敗しました: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const upcomingShifts = shifts.filter(s => {\n    // 現在の日付以降のシフトのみ表示（簡易チェック）\n    const shiftDateTime = new Date(`${s.date}T${s.endTime}`);\n    return shiftDateTime > new Date();\n  }).sort((a, b) => new Date(a.date) - new Date(b.date));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-green-700\",\n      children: \"\\u3042\\u306A\\u305F\\u306E\\u30B7\\u30D5\\u30C8\\u3068\\u516C\\u958B\\u30B7\\u30D5\\u30C8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 13\n    }, this), upcomingShifts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500\",\n      children: \"\\u73FE\\u5728\\u3001\\u5FDC\\u52DF\\u53EF\\u80FD\\u306A\\u30B7\\u30D5\\u30C8\\u3084\\u4ECA\\u5F8C\\u306E\\u30B7\\u30D5\\u30C8\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: upcomingShifts.map(shift => /*#__PURE__*/_jsxDEV(ShiftListItem, {\n        shift: {\n          ...shift,\n          currentUserId: userId\n        } // userIdを渡す\n        ,\n        isManager: false,\n        handleAction: handleAction\n      }, shift.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 425,\n    columnNumber: 9\n  }, this);\n};\n\n/**\n * マネージャー：シフト閲覧画面 (全てのシフトを管理)\n */\n_c6 = StaffShiftView;\nconst ManagerShiftView = ({\n  shifts,\n  setView,\n  setSelectedShift,\n  userId\n}) => {\n  const handleAction = shift => {\n    // 編集画面へ遷移\n    setSelectedShift(shift);\n    setView('ShiftAnalysis'); // 詳細・分析画面へ\n  };\n\n  // 日付でソート\n  const sortedShifts = shifts.sort((a, b) => new Date(b.date) - new Date(a.date));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-indigo-700\",\n      children: \"\\u5168\\u3066\\u306E\\u30B7\\u30D5\\u30C8\\u7BA1\\u7406\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setView('ManagerCreate'),\n      className: \"mb-6 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300\",\n      children: \"\\u65B0\\u898F\\u30B7\\u30D5\\u30C8\\u4F5C\\u6210 +\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 13\n    }, this), sortedShifts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500\",\n      children: \"\\u307E\\u3060\\u30B7\\u30D5\\u30C8\\u304C\\u4F5C\\u6210\\u3055\\u308C\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: sortedShifts.map(shift => /*#__PURE__*/_jsxDEV(ShiftListItem, {\n        shift: {\n          ...shift,\n          currentUserId: userId\n        },\n        isManager: true,\n        handleAction: handleAction\n      }, shift.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 461,\n    columnNumber: 9\n  }, this);\n};\n\n/**\n * マネージャー：シフト詳細・分析画面\n */\n_c7 = ManagerShiftView;\nconst ShiftAnalysis = ({\n  selectedShift,\n  setView,\n  userId,\n  users,\n  db,\n  appId,\n  setError,\n  setLoading,\n  setSuccessMessage\n}) => {\n  if (!selectedShift) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-red-500\",\n      children: \"\\u30B7\\u30D5\\u30C8\\u304C\\u9078\\u629E\\u3055\\u308C\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 16\n    }, this);\n  }\n\n  // 割り当てられたスタッフの名前を解決\n  const assignedStaffNames = selectedShift.assignedStaff.map(id => {\n    var _users$find;\n    return ((_users$find = users.find(u => u.id === id)) === null || _users$find === void 0 ? void 0 : _users$find.name) || `不明なスタッフ (${id.substring(0, 4)}...)`;\n  }).join(', ');\n  const handleStatusChange = async newStatus => {\n    setLoading(true);\n    setError(null);\n    setSuccessMessage(null);\n    try {\n      const shiftDocRef = doc(db, `artifacts/${appId}/public/data/shifts`, selectedShift.id);\n      await withRetry(() => setDoc(shiftDocRef, {\n        status: newStatus\n      }, {\n        merge: true\n      }));\n      setSuccessMessage(`シフトステータスを「${newStatus}」に変更しました。`);\n      setView('ManagerShiftView');\n    } catch (e) {\n      console.error(\"ステータス更新エラー:\", e);\n      setError(`ステータスの更新に失敗しました: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setView('ManagerShiftView'),\n      className: \"text-indigo-600 hover:text-indigo-800 font-medium mb-4 flex items-center\",\n      children: \"\\u2190 \\u30B7\\u30D5\\u30C8\\u4E00\\u89A7\\u306B\\u623B\\u308B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-4 text-gray-800\",\n      children: \"\\u30B7\\u30D5\\u30C8\\u8A73\\u7D30\\u3068\\u5206\\u6790\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-lg space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-2xl font-semibold text-indigo-700\",\n        children: [selectedShift.date, \" (\", selectedShift.startTime, \" - \", selectedShift.endTime, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u4F5C\\u6210\\u8005:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 46\n        }, this), \" \", selectedShift.managerName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u8AAC\\u660E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 46\n        }, this), \" \", selectedShift.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t pt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-bold\",\n          children: \"\\u8981\\u54E1\\u72B6\\u6CC1:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl font-bold mt-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: selectedShift.assignedStaff.length >= selectedShift.requiredStaff ? 'text-red-600' : 'text-green-600',\n            children: selectedShift.assignedStaff.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 25\n          }, this), \"/ \", selectedShift.requiredStaff, \" \\u540D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-700 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u5272\\u308A\\u5F53\\u3066\\u6E08\\u307F\\u30B9\\u30BF\\u30C3\\u30D5:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 63\n          }, this), \" \", assignedStaffNames || 'なし']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t pt-4 space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-bold\",\n          children: \"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\\u7BA1\\u7406:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStatusChange('closed'),\n            className: \"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200\",\n            children: \"\\u30B7\\u30D5\\u30C8\\u3092\\u7D42\\u4E86\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStatusChange('open'),\n            className: \"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200\",\n            children: \"\\u30B7\\u30D5\\u30C8\\u3092\\u516C\\u958B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [\"\\u73FE\\u5728\\u306E\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: selectedShift.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 68\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 520,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Main App Component ---\n\n/**\n * シフト管理システムのメインアプリケーション\n * @returns {JSX.Element}\n */\n_c8 = ShiftAnalysis;\nexport default function App() {\n  _s3();\n  const [app, setApp] = useState(null);\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [user, setUser] = useState(null); // Firebase Auth User Object\n  const [userId, setUserId] = useState(null); // uid or anonymous ID\n  const [userProfile, setUserProfile] = useState(null); // Firestore User Profile (name, role)\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null); // 成功メッセージのステートを追加\n\n  // Navigation and Data State\n  const [view, setView] = useState('LoginScreen'); // 'LoginScreen', 'RegisterUser', 'StaffShiftView', 'ManagerShiftView', 'ManagerCreate', 'ShiftAnalysis'\n  const [shifts, setShifts] = useState([]);\n  const [users, setUsers] = useState([]); // All users for lookups\n  const [selectedShift, setSelectedShift] = useState(null);\n  const isManager = (userProfile === null || userProfile === void 0 ? void 0 : userProfile.role) === 'manager';\n  const isAuthenticated = !!user;\n\n  // 1. Firebase初期化と認証\n  useEffect(() => {\n    if (Object.keys(firebaseConfig).length === 0) {\n      setError('Firebase設定が利用できません。');\n      setIsAuthReady(true);\n      return;\n    }\n    const appInstance = initializeApp(firebaseConfig);\n    const authInstance = getAuth(appInstance);\n    const dbInstance = getFirestore(appInstance);\n    setApp(appInstance);\n    setAuth(authInstance);\n    setDb(dbInstance);\n\n    // 認証状態の監視\n    const unsubscribe = onAuthStateChanged(authInstance, async currentUser => {\n      if (currentUser) {\n        setUser(currentUser);\n        setUserId(currentUser.uid);\n\n        // 認証トークンがある場合はカスタムサインインを試みる（Canvas環境）\n        if (initialAuthToken && currentUser.isAnonymous) {\n          try {\n            await withRetry(() => signInWithCustomToken(authInstance, initialAuthToken));\n            // 成功したらonAuthStateChangedが再度発火するのでここでは何もしない\n          } catch (e) {\n            console.error(\"カスタム認証トークンサインインエラー:\", e);\n            // エラーが発生しても匿名で続行\n          }\n        }\n      } else {\n        // ユーザーがいない場合、匿名サインインを試みる\n        try {\n          await withRetry(() => signInAnonymously(authInstance));\n        } catch (e) {\n          console.error(\"匿名サインインエラー:\", e);\n          setError('匿名サインインに失敗しました。アプリケーションをロードできません。');\n        }\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // 2. ユーザープロファイルのロード\n  useEffect(() => {\n    if (db && userId) {\n      const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/profile/data`);\n      const unsubscribeProfile = onSnapshot(userDocRef, docSnap => {\n        if (docSnap.exists()) {\n          const profile = docSnap.data();\n          setUserProfile(profile);\n          // ロールに基づいてビューを切り替え\n          if (profile.role === 'manager') {\n            setView('ManagerShiftView');\n          } else {\n            setView('StaffShiftView');\n          }\n        } else {\n          setUserProfile(null);\n          // プロファイルが存在しない場合は登録画面へ誘導\n          setView('RegisterUser');\n        }\n      }, error => {\n        console.error(\"ユーザープロファイル読み込みエラー:\", error);\n        setError(`プロファイル読み込みエラー: ${error.message}`);\n      });\n      return () => unsubscribeProfile();\n    }\n  }, [db, userId]);\n\n  // 3. 全シフトデータの購読 (公開データ)\n  useEffect(() => {\n    if (db && userProfile) {\n      const shiftsColRef = collection(db, `artifacts/${appId}/public/data/shifts`);\n      // Note: We avoid orderBy here to prevent index errors. Data will be sorted in memory.\n      const q = query(shiftsColRef);\n      const unsubscribeShifts = onSnapshot(q, snapshot => {\n        const fetchedShifts = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setShifts(fetchedShifts);\n      }, error => {\n        console.error(\"シフトデータ読み込みエラー:\", error);\n        setError(`シフトデータの読み込みに失敗しました: ${error.message}`);\n      });\n      return () => unsubscribeShifts();\n    }\n  }, [db, userProfile]);\n\n  // 4. 全ユーザーデータの購読 (マネージャー向け、またはスタッフ名解決用)\n  useEffect(() => {\n    if (db && userProfile) {\n      const usersColRef = collection(db, `artifacts/${appId}/users`);\n      const unsubscribeUsers = onSnapshot(usersColRef, snapshot => {\n        const fetchedUsers = snapshot.docs.map(doc => {\n          var _doc$data$profile;\n          return {\n            id: doc.id,\n            ...((_doc$data$profile = doc.data().profile) === null || _doc$data$profile === void 0 ? void 0 : _doc$data$profile.data) // assuming profile/data structure from registration\n          };\n        }).filter(u => u.name && u.role); // 有効なユーザーのみをフィルタ\n\n        setUsers(fetchedUsers);\n      }, error => {\n        console.error(\"ユーザーデータ読み込みエラー:\", error);\n      });\n      return () => unsubscribeUsers();\n    }\n  }, [db, userProfile]);\n\n  // 5. メインコンテンツのレンダリング\n  const renderContent = useMemo(() => {\n    if (!isAuthReady) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-pulse text-indigo-500\",\n          children: \"\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u3092\\u521D\\u671F\\u5316\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 17\n      }, this);\n    }\n    if (!isAuthenticated || view === 'LoginScreen') {\n      return /*#__PURE__*/_jsxDEV(LoginScreen, {\n        auth: auth,\n        setView: setView,\n        isAuthReady: isAuthReady\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 726,\n        columnNumber: 20\n      }, this);\n    }\n    if (!userProfile && view !== 'RegisterUser') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl text-red-500 mb-4\",\n          children: \"\\u30E6\\u30FC\\u30B6\\u30FC\\u30D7\\u30ED\\u30D5\\u30A1\\u30A4\\u30EB\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setView('RegisterUser'),\n          className: \"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300\",\n          children: \"\\u30D7\\u30ED\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u767B\\u9332\\u3059\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 17\n      }, this);\n    }\n    switch (view) {\n      case 'RegisterUser':\n        return /*#__PURE__*/_jsxDEV(RegisterUser, {\n          db: db,\n          userId: userId,\n          setView: setView,\n          setLoading: setLoading,\n          setError: setError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 24\n        }, this);\n      case 'StaffShiftView':\n        return /*#__PURE__*/_jsxDEV(StaffShiftView, {\n          shifts: shifts,\n          userId: userId,\n          db: db,\n          appId: appId,\n          setLoading: setLoading,\n          setError: setError,\n          setView: setView\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 24\n        }, this);\n      case 'ManagerShiftView':\n        return /*#__PURE__*/_jsxDEV(ManagerShiftView, {\n          shifts: shifts,\n          setView: setView,\n          setSelectedShift: setSelectedShift,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 24\n        }, this);\n      case 'ManagerCreate':\n        return /*#__PURE__*/_jsxDEV(ManagerCreate, {\n          db: db,\n          userId: userId,\n          setError: setError,\n          setLoading: setLoading,\n          userProfile: userProfile,\n          setSuccessMessage: setSuccessMessage // 成功メッセージハンドラを追加\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 24\n        }, this);\n      case 'ShiftAnalysis':\n        return /*#__PURE__*/_jsxDEV(ShiftAnalysis, {\n          selectedShift: selectedShift,\n          setView: setView,\n          userId: userId,\n          users: users,\n          db: db,\n          appId: appId,\n          setError: setError,\n          setLoading: setLoading,\n          setSuccessMessage: setSuccessMessage // 成功メッセージハンドラを追加\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 777,\n          columnNumber: 24\n        }, this);\n      case 'StaffWorkHours':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold\",\n            children: \"\\u3042\\u306A\\u305F\\u306E\\u52E4\\u52D9\\u6642\\u9593\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u3053\\u306E\\u30D3\\u30E5\\u30FC\\u306B\\u30ED\\u30B8\\u30C3\\u30AF\\u3092\\u8FFD\\u52A0\\u3057\\u307E\\u3059\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 93\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 24\n        }, this);\n      case 'ManagerAttendance':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold\",\n            children: \"\\u5F93\\u696D\\u54E1\\u51FA\\u52E4\\u7C3F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u3053\\u306E\\u30D3\\u30E5\\u30FC\\u306B\\u30ED\\u30B8\\u30C3\\u30AF\\u3092\\u8FFD\\u52A0\\u3057\\u307E\\u3059\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 91\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 24\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 text-center text-red-500\",\n          children: \"\\u7121\\u52B9\\u306A\\u30D3\\u30E5\\u30FC\\u3067\\u3059\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 24\n        }, this);\n    }\n  }, [view, isAuthReady, isAuthenticated, userProfile, auth, userId, db, shifts, selectedShift, users, setSuccessMessage]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 font-sans p-4 sm:p-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: \"true\",\n      children: `\n                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n                .font-sans {\n                    font-family: 'Inter', sans-serif;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex justify-between items-center mb-6 p-4 bg-white rounded-xl shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-indigo-600\",\n        children: userProfile ? `${userProfile.name} の ${isManager ? '管理' : 'スタッフ'} ダッシュボード` : 'シフト管理'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 17\n      }, this), isAuthenticated && auth && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async () => {\n          try {\n            await signOut(auth);\n            setUser(null);\n            setUserProfile(null);\n            setView('LoginScreen');\n            console.log(\"サインアウトしました。\");\n          } catch (e) {\n            console.error(\"サインアウトエラー:\", e);\n          }\n        },\n        className: \"bg-red-500 hover:bg-red-600 text-white text-sm font-semibold py-2 px-4 rounded-lg shadow transition duration-300\",\n        children: \"\\u30B5\\u30A4\\u30F3\\u30A2\\u30A6\\u30C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 13\n    }, this), isAuthenticated && userProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col lg:flex-row gap-6\",\n      children: [isManager && /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"w-full lg:w-64 bg-white p-4 rounded-xl shadow-lg h-fit\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-700 mb-3 border-b pb-2\",\n          children: \"\\u30CA\\u30D3\\u30B2\\u30FC\\u30B7\\u30E7\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 837,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: ['ManagerShiftView', 'ManagerCreate', 'ManagerAttendance'].map(navView => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setView(navView);\n                setSelectedShift(null); // シフト詳細をリセット\n              },\n              className: `w-full text-left p-2 rounded-lg font-medium transition duration-200 ${view === navView ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`,\n              children: [navView === 'ManagerShiftView' && '全てのシフトを見る', navView === 'ManagerCreate' && 'シフトを作成', navView === 'ManagerAttendance' && '出勤簿管理']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 841,\n              columnNumber: 41\n            }, this)\n          }, navView, false, {\n            fileName: _jsxFileName,\n            lineNumber: 840,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 836,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 mb-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u30A8\\u30E9\\u30FC:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 864,\n            columnNumber: 33\n          }, this), \" \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 29\n        }, this), successMessage &&\n        /*#__PURE__*/\n        // Success Message 表示\n        _jsxDEV(\"div\", {\n          className: \"p-4 mb-4 bg-green-100 border border-green-400 text-green-700 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u6210\\u529F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 869,\n            columnNumber: 33\n          }, this), \" \", successMessage]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 29\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center p-4 mb-4 bg-yellow-100 text-yellow-700 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-700 mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 874,\n            columnNumber: 33\n          }, this), \"\\u51E6\\u7406\\u4E2D...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(AuthStatus, {\n          userId: userId,\n          isManager: isManager\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 879,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-lg min-h-[60vh]\",\n          children: renderContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 834,\n      columnNumber: 17\n    }, this), !isAuthenticated && isAuthReady && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[80vh]\",\n      children: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 800,\n    columnNumber: 9\n  }, this);\n}\n_s3(App, \"wnTYVzGp4KLS9NZXVleYXD+S3ZE=\");\n_c9 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"AuthStatus\");\n$RefreshReg$(_c2, \"LoginScreen\");\n$RefreshReg$(_c3, \"RegisterUser\");\n$RefreshReg$(_c4, \"ManagerCreate\");\n$RefreshReg$(_c5, \"ShiftListItem\");\n$RefreshReg$(_c6, \"StaffShiftView\");\n$RefreshReg$(_c7, \"ManagerShiftView\");\n$RefreshReg$(_c8, \"ShiftAnalysis\");\n$RefreshReg$(_c9, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","initializeApp","getAuth","signInAnonymously","signInWithCustomToken","onAuthStateChanged","signOut","getFirestore","doc","setDoc","getDoc","collection","query","onSnapshot","addDoc","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","__firebase_config","JSON","parse","appId","__app_id","initialAuthToken","__initial_auth_token","AuthStatus","userId","isManager","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","withRetry","apiCall","maxRetries","i","error","console","delay","Math","pow","random","Promise","resolve","setTimeout","LoginScreen","auth","setView","isAuthReady","onClick","_c2","RegisterUser","db","setLoading","setError","_s","name","setName","role","setRole","handleRegister","userDocRef","createdAt","Date","toISOString","merge","e","message","htmlFor","id","type","value","onChange","target","placeholder","checked","disabled","_c3","ManagerCreate","userProfile","setSuccessMessage","_s2","shiftDate","setShiftDate","startTime","setStartTime","endTime","setEndTime","requiredStaff","setRequiredStaff","description","setDescription","handleSubmit","preventDefault","shiftData","date","managerId","managerName","assignedStaff","status","shiftsColRef","onSubmit","required","min","max","parseInt","rows","_c4","ShiftListItem","shift","handleAction","isAssigned","includes","currentUserId","isFull","length","staffCount","actionText","actionColor","_c5","StaffShiftView","shifts","shiftDocRef","newAssignedStaff","filter","push","upcomingShifts","s","shiftDateTime","sort","a","b","map","_c6","ManagerShiftView","setSelectedShift","sortedShifts","_c7","ShiftAnalysis","selectedShift","users","assignedStaffNames","_users$find","find","u","substring","join","handleStatusChange","newStatus","_c8","App","_s3","app","setApp","setDb","setAuth","user","setUser","setUserId","setUserProfile","setIsAuthReady","loading","successMessage","view","setShifts","setUsers","isAuthenticated","Object","keys","appInstance","authInstance","dbInstance","unsubscribe","currentUser","uid","isAnonymous","unsubscribeProfile","docSnap","exists","profile","data","q","unsubscribeShifts","snapshot","fetchedShifts","docs","usersColRef","unsubscribeUsers","fetchedUsers","_doc$data$profile","renderContent","jsx","log","navView","_c9","$RefreshReg$"],"sources":["C:/Users/kouki/my-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { \n    getAuth, \n    signInAnonymously, \n    signInWithCustomToken, \n    onAuthStateChanged,\n    signOut\n} from 'firebase/auth';\nimport { \n    getFirestore, \n    doc, \n    setDoc, \n    getDoc, \n    collection, \n    query, \n    onSnapshot, \n    addDoc\n} from 'firebase/firestore';\n\n// --- Firebase & Utility Setup ---\n\n// Firebase設定の取得と初期化\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-shift-app';\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\n/**\n * 認証ステータスの表示（デバッグ用）\n * @param {string} userId - 現在のユーザーID\n * @returns {JSX.Element}\n */\nconst AuthStatus = ({ userId, isManager }) => (\n    <div className=\"text-xs p-2 bg-gray-700 text-gray-300 rounded-lg shadow-inner mb-4\">\n        <p><strong>App ID:</strong> {appId}</p>\n        <p><strong>ユーザーID:</strong> {userId}</p>\n        <p><strong>ロール:</strong> <span className={isManager ? \"text-yellow-400 font-bold\" : \"text-green-400 font-bold\"}>\n            {isManager ? 'マネージャー' : 'スタッフ'}\n        </span></p>\n    </div>\n);\n\n/**\n * 遅延リトライ関数 (Exponential Backoff)\n * @param {Function} apiCall - 実行する非同期API関数\n * @param {number} maxRetries - 最大リトライ回数\n * @returns {Promise<any>}\n */\nconst withRetry = async (apiCall, maxRetries = 5) => {\n    for (let i = 0; i < maxRetries; i++) {\n        try {\n            return await apiCall();\n        } catch (error) {\n            if (i === maxRetries - 1) {\n                console.error(\"API呼び出しが最大リトライ回数に達しました。\", error);\n                throw error;\n            }\n            const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;\n            await new Promise(resolve => setTimeout(resolve, delay));\n        }\n    }\n};\n\n// --- View Components (Internal) ---\n\n/**\n * ログイン/初期認証画面\n */\nconst LoginScreen = ({ auth, setView, isAuthReady }) => (\n    <div className=\"flex flex-col items-center justify-center h-full\">\n        <div className=\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\">\n            <h1 className=\"text-3xl font-bold text-gray-800 mb-6 text-center\">\n                シフト管理システム\n            </h1>\n            <p className=\"text-center text-gray-600 mb-8\">\n                システムを利用するには、サインインが必要です。\n            </p>\n            {isAuthReady ? (\n                <>\n                    <button\n                        onClick={() => setView('RegisterUser')}\n                        className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] mb-4\"\n                    >\n                        新規アカウント登録\n                    </button>\n                    <button\n                        onClick={async () => {\n                            // 匿名サインインは通常、新規登録フローの一部ですが、\n                            // ここでは、認証が完了していない場合の代替手段として残します。\n                            try {\n                                await withRetry(() => signInAnonymously(auth));\n                            } catch (error) {\n                                console.error(\"匿名サインインエラー:\", error);\n                            }\n                        }}\n                        className=\"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300\"\n                    >\n                        匿名で続行 (デバッグ/テスト)\n                    </button>\n                </>\n            ) : (\n                <div className=\"flex justify-center items-center py-4\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n                    <span className=\"ml-3 text-indigo-600\">認証準備中...</span>\n                </div>\n            )}\n        </div>\n    </div>\n);\n\n/**\n * ユーザー登録画面 (Firebaseには登録機能がないため、ここではFirestoreにロールを保存する処理を行う)\n */\nconst RegisterUser = ({ db, userId, setView, setLoading, setError }) => {\n    const [name, setName] = useState('');\n    const [role, setRole] = useState('staff');\n\n    const handleRegister = async () => {\n        if (!name || !userId) {\n            setError('名前とユーザーIDが必要です。');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n        try {\n            const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/profile/data`);\n            await withRetry(() => setDoc(userDocRef, {\n                name: name,\n                role: role,\n                userId: userId,\n                createdAt: new Date().toISOString()\n            }, { merge: true }));\n            \n            // 登録後、自動でホームビューに戻る\n            setView(role === 'manager' ? 'ManagerShiftView' : 'StaffShiftView');\n        } catch (e) {\n            console.error(\"ユーザー登録エラー:\", e);\n            setError(`登録に失敗しました: ${e.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">新規ユーザー登録</h2>\n            <div className=\"mb-4\">\n                <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"name\">氏名</label>\n                <input\n                    id=\"name\"\n                    type=\"text\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n                    placeholder=\"あなたの名前\"\n                />\n            </div>\n            <div className=\"mb-6\">\n                <label className=\"block text-gray-700 font-medium mb-2\">役割</label>\n                <div className=\"flex space-x-4\">\n                    <label className=\"inline-flex items-center\">\n                        <input\n                            type=\"radio\"\n                            className=\"form-radio text-indigo-600 h-5 w-5\"\n                            name=\"role\"\n                            value=\"staff\"\n                            checked={role === 'staff'}\n                            onChange={() => setRole('staff')}\n                        />\n                        <span className=\"ml-2 text-gray-700\">スタッフ</span>\n                    </label>\n                    <label className=\"inline-flex items-center\">\n                        <input\n                            type=\"radio\"\n                            className=\"form-radio text-indigo-600 h-5 w-5\"\n                            name=\"role\"\n                            value=\"manager\"\n                            checked={role === 'manager'}\n                            onChange={() => setRole('manager')}\n                        />\n                        <span className=\"ml-2 text-gray-700\">マネージャー</span>\n                    </label>\n                </div>\n            </div>\n            <button\n                onClick={handleRegister}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300\"\n                disabled={!name || !userId}\n            >\n                登録\n            </button>\n            <button \n                onClick={() => signOut(getAuth(initializeApp(firebaseConfig)))}\n                className=\"mt-4 w-full text-sm text-gray-500 hover:text-gray-700\"\n            >\n                別アカウントでサインイン\n            </button>\n        </div>\n    );\n};\n\n\n/**\n * マネージャー：シフト作成画面\n */\nconst ManagerCreate = ({ db, userId, setError, setLoading, userProfile, setSuccessMessage }) => {\n    const [shiftDate, setShiftDate] = useState('');\n    const [startTime, setStartTime] = useState('09:00');\n    const [endTime, setEndTime] = useState('17:00');\n    const [requiredStaff, setRequiredStaff] = useState(1);\n    const [description, setDescription] = useState('');\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        setError(null);\n        setSuccessMessage(null); // 新しい処理の開始時に成功メッセージもクリア\n        \n        if (!shiftDate || !startTime || !endTime || requiredStaff < 1) {\n            setError('全て必須項目を入力してください。');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const shiftData = {\n                date: shiftDate,\n                startTime: startTime,\n                endTime: endTime,\n                requiredStaff: requiredStaff,\n                description: description,\n                managerId: userId,\n                managerName: userProfile.name || '不明なマネージャー',\n                assignedStaff: [], // 割り当てられたスタッフのIDリスト\n                status: 'open',\n                createdAt: new Date().toISOString()\n            };\n\n            const shiftsColRef = collection(db, `artifacts/${appId}/public/data/shifts`);\n            await withRetry(() => addDoc(shiftsColRef, shiftData));\n\n            setSuccessMessage('新しいシフトが正常に作成されました！');\n            // フォームのリセット\n            setShiftDate('');\n            setRequiredStaff(1);\n            setDescription('');\n        } catch (e) {\n            console.error(\"シフト作成エラー:\", e);\n            setError(`シフトの作成に失敗しました: ${e.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-6 text-indigo-700\">新規シフトの作成</h2>\n            <form onSubmit={handleSubmit} className=\"space-y-4 bg-white p-6 rounded-xl shadow-lg\">\n                <div>\n                    <label className=\"block text-gray-700 font-medium mb-1\">日付</label>\n                    <input\n                        type=\"date\"\n                        value={shiftDate}\n                        onChange={(e) => setShiftDate(e.target.value)}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg\"\n                        required\n                    />\n                </div>\n                <div className=\"flex space-x-4\">\n                    <div className=\"flex-1\">\n                        <label className=\"block text-gray-700 font-medium mb-1\">開始時刻</label>\n                        <input\n                            type=\"time\"\n                            value={startTime}\n                            onChange={(e) => setStartTime(e.target.value)}\n                            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n                            required\n                        />\n                    </div>\n                    <div className=\"flex-1\">\n                        <label className=\"block text-gray-700 font-medium mb-1\">終了時刻</label>\n                        <input\n                            type=\"time\"\n                            value={endTime}\n                            onChange={(e) => setEndTime(e.target.value)}\n                            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n                            required\n                        />\n                    </div>\n                </div>\n                <div>\n                    <label className=\"block text-gray-700 font-medium mb-1\">必要スタッフ数</label>\n                    <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={requiredStaff}\n                        onChange={(e) => setRequiredStaff(Math.max(1, parseInt(e.target.value)))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg\"\n                        required\n                    />\n                </div>\n                <div>\n                    <label className=\"block text-gray-700 font-medium mb-1\">説明</label>\n                    <textarea\n                        value={description}\n                        onChange={(e) => setDescription(e.target.value)}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg resize-none\"\n                        rows=\"3\"\n                        placeholder=\"特別な指示や場所\"\n                    ></textarea>\n                </div>\n                <button\n                    type=\"submit\"\n                    className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300\"\n                >\n                    シフトを公開\n                </button>\n            </form>\n        </div>\n    );\n};\n\n/**\n * シフトリストアイテムの共通コンポーネント\n * @param {object} shift - シフトデータ\n * @param {boolean} isManager - マネージャーかどうか\n * @param {Function} handleAction - アクションボタンのハンドラ\n * @returns {JSX.Element}\n */\nconst ShiftListItem = ({ shift, isManager, handleAction }) => {\n    const isAssigned = shift.assignedStaff.includes(shift.currentUserId); // currentUserIdはApp.jsxから渡される想定\n    const isFull = shift.assignedStaff.length >= shift.requiredStaff;\n    const staffCount = shift.assignedStaff.length;\n\n    const actionText = isManager \n        ? \"詳細/編集\"\n        : isAssigned \n            ? \"キャンセル\" \n            : isFull \n                ? \"満員\"\n                : \"応募\";\n    \n    const actionColor = isManager\n        ? \"bg-blue-500 hover:bg-blue-600\"\n        : isAssigned\n            ? \"bg-red-500 hover:bg-red-600\"\n            : isFull\n                ? \"bg-gray-400\"\n                : \"bg-green-500 hover:bg-green-600\";\n\n    return (\n        <div className=\"bg-white p-5 rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition duration-200 flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0\">\n            <div className=\"flex-1\">\n                <p className=\"text-xl font-semibold text-gray-800\">{shift.date}</p>\n                <p className=\"text-sm text-gray-600\">\n                    {shift.startTime} - {shift.endTime} ({shift.managerName})\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">{shift.description}</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n                <div className={`px-3 py-1 text-sm font-bold rounded-full ${isFull ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>\n                    {staffCount}/{shift.requiredStaff} 名\n                </div>\n                <button\n                    onClick={() => handleAction(shift)}\n                    className={`text-white font-medium py-2 px-4 rounded-lg transition duration-200 ${actionColor} ${!isManager && isFull && !isAssigned ? 'opacity-50 cursor-not-allowed' : ''}`}\n                    disabled={!isManager && isFull && !isAssigned}\n                >\n                    {actionText}\n                </button>\n            </div>\n        </div>\n    );\n};\n\n/**\n * スタッフ：シフト閲覧画面 (応募/キャンセル機能付き)\n */\nconst StaffShiftView = ({ shifts, userId, db, appId, setLoading, setError, setView }) => {\n\n    const handleAction = async (shift) => {\n        if (shift.status !== 'open') return; // 公開されていないシフトは操作不可\n\n        const isAssigned = shift.assignedStaff.includes(userId);\n        const shiftDocRef = doc(db, `artifacts/${appId}/public/data/shifts`, shift.id);\n\n        setLoading(true);\n        setError(null);\n\n        try {\n            let newAssignedStaff = [...shift.assignedStaff];\n\n            if (isAssigned) {\n                // キャンセル\n                newAssignedStaff = newAssignedStaff.filter(id => id !== userId);\n            } else {\n                // 応募 (満員チェックはUIで実施済みだが念のためサーバー側でも)\n                if (newAssignedStaff.length < shift.requiredStaff) {\n                    newAssignedStaff.push(userId);\n                } else {\n                    setError('このシフトは既に満員です。');\n                    setLoading(false);\n                    return;\n                }\n            }\n\n            await withRetry(() => setDoc(shiftDocRef, { assignedStaff: newAssignedStaff }, { merge: true }));\n            // alert(`シフトを${isAssigned ? 'キャンセル' : '応募'}しました！`);\n        } catch (e) {\n            console.error(\"シフト操作エラー:\", e);\n            setError(`操作に失敗しました: ${e.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const upcomingShifts = shifts.filter(s => {\n        // 現在の日付以降のシフトのみ表示（簡易チェック）\n        const shiftDateTime = new Date(`${s.date}T${s.endTime}`);\n        return shiftDateTime > new Date();\n    }).sort((a, b) => new Date(a.date) - new Date(b.date));\n\n    return (\n        <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-6 text-green-700\">あなたのシフトと公開シフト</h2>\n            \n            {upcomingShifts.length === 0 ? (\n                <p className=\"text-gray-500\">現在、応募可能なシフトや今後のシフトはありません。</p>\n            ) : (\n                <div className=\"space-y-4\">\n                    {upcomingShifts.map(shift => (\n                        <ShiftListItem \n                            key={shift.id} \n                            shift={{ ...shift, currentUserId: userId }} // userIdを渡す\n                            isManager={false}\n                            handleAction={handleAction}\n                        />\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\n/**\n * マネージャー：シフト閲覧画面 (全てのシフトを管理)\n */\nconst ManagerShiftView = ({ shifts, setView, setSelectedShift, userId }) => {\n    \n    const handleAction = (shift) => {\n        // 編集画面へ遷移\n        setSelectedShift(shift);\n        setView('ShiftAnalysis'); // 詳細・分析画面へ\n    };\n\n    // 日付でソート\n    const sortedShifts = shifts.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n    return (\n        <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-6 text-indigo-700\">全てのシフト管理</h2>\n            <button\n                onClick={() => setView('ManagerCreate')}\n                className=\"mb-6 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300\"\n            >\n                新規シフト作成 +\n            </button>\n            \n            {sortedShifts.length === 0 ? (\n                <p className=\"text-gray-500\">まだシフトが作成されていません。</p>\n            ) : (\n                <div className=\"space-y-4\">\n                    {sortedShifts.map(shift => (\n                        <ShiftListItem \n                            key={shift.id} \n                            shift={{ ...shift, currentUserId: userId }} \n                            isManager={true}\n                            handleAction={handleAction}\n                        />\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\n/**\n * マネージャー：シフト詳細・分析画面\n */\nconst ShiftAnalysis = ({ selectedShift, setView, userId, users, db, appId, setError, setLoading, setSuccessMessage }) => {\n    if (!selectedShift) {\n        return <div className=\"p-6 text-red-500\">シフトが選択されていません。</div>;\n    }\n\n    // 割り当てられたスタッフの名前を解決\n    const assignedStaffNames = selectedShift.assignedStaff\n        .map(id => users.find(u => u.id === id)?.name || `不明なスタッフ (${id.substring(0, 4)}...)`)\n        .join(', ');\n\n    const handleStatusChange = async (newStatus) => {\n        setLoading(true);\n        setError(null);\n        setSuccessMessage(null);\n        try {\n            const shiftDocRef = doc(db, `artifacts/${appId}/public/data/shifts`, selectedShift.id);\n            await withRetry(() => setDoc(shiftDocRef, { status: newStatus }, { merge: true }));\n            setSuccessMessage(`シフトステータスを「${newStatus}」に変更しました。`);\n            setView('ManagerShiftView');\n        } catch (e) {\n            console.error(\"ステータス更新エラー:\", e);\n            setError(`ステータスの更新に失敗しました: ${e.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n\n    return (\n        <div className=\"p-6\">\n            <button \n                onClick={() => setView('ManagerShiftView')}\n                className=\"text-indigo-600 hover:text-indigo-800 font-medium mb-4 flex items-center\"\n            >\n                &larr; シフト一覧に戻る\n            </button>\n            <h2 className=\"text-3xl font-bold mb-4 text-gray-800\">シフト詳細と分析</h2>\n\n            <div className=\"bg-white p-6 rounded-xl shadow-lg space-y-4\">\n                <p className=\"text-2xl font-semibold text-indigo-700\">{selectedShift.date} ({selectedShift.startTime} - {selectedShift.endTime})</p>\n                <p className=\"text-gray-600\"><strong>作成者:</strong> {selectedShift.managerName}</p>\n                <p className=\"text-gray-600\"><strong>説明:</strong> {selectedShift.description}</p>\n                <div className=\"border-t pt-4\">\n                    <p className=\"text-lg font-bold\">要員状況:</p>\n                    <p className=\"text-xl font-bold mt-1\">\n                        <span className={selectedShift.assignedStaff.length >= selectedShift.requiredStaff ? 'text-red-600' : 'text-green-600'}>\n                            {selectedShift.assignedStaff.length}\n                        </span>\n                        / {selectedShift.requiredStaff} 名\n                    </p>\n                    <p className=\"text-sm text-gray-700 mt-2\"><strong>割り当て済みスタッフ:</strong> {assignedStaffNames || 'なし'}</p>\n                </div>\n                \n                <div className=\"border-t pt-4 space-y-2\">\n                    <p className=\"text-lg font-bold\">ステータス管理:</p>\n                    <div className=\"flex space-x-3\">\n                        <button\n                            onClick={() => handleStatusChange('closed')}\n                            className=\"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200\"\n                        >\n                            シフトを終了\n                        </button>\n                        <button\n                            onClick={() => handleStatusChange('open')}\n                            className=\"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200\"\n                        >\n                            シフトを公開\n                        </button>\n                    </div>\n                    <p className=\"text-sm text-gray-500\">現在のステータス: <span className=\"font-bold\">{selectedShift.status}</span></p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Main App Component ---\n\n/**\n * シフト管理システムのメインアプリケーション\n * @returns {JSX.Element}\n */\nexport default function App() {\n    const [app, setApp] = useState(null);\n    const [db, setDb] = useState(null);\n    const [auth, setAuth] = useState(null);\n    const [user, setUser] = useState(null); // Firebase Auth User Object\n    const [userId, setUserId] = useState(null); // uid or anonymous ID\n    const [userProfile, setUserProfile] = useState(null); // Firestore User Profile (name, role)\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [successMessage, setSuccessMessage] = useState(null); // 成功メッセージのステートを追加\n\n    // Navigation and Data State\n    const [view, setView] = useState('LoginScreen'); // 'LoginScreen', 'RegisterUser', 'StaffShiftView', 'ManagerShiftView', 'ManagerCreate', 'ShiftAnalysis'\n    const [shifts, setShifts] = useState([]);\n    const [users, setUsers] = useState([]); // All users for lookups\n    const [selectedShift, setSelectedShift] = useState(null);\n\n    const isManager = userProfile?.role === 'manager';\n    const isAuthenticated = !!user;\n\n    // 1. Firebase初期化と認証\n    useEffect(() => {\n        if (Object.keys(firebaseConfig).length === 0) {\n            setError('Firebase設定が利用できません。');\n            setIsAuthReady(true);\n            return;\n        }\n\n        const appInstance = initializeApp(firebaseConfig);\n        const authInstance = getAuth(appInstance);\n        const dbInstance = getFirestore(appInstance);\n\n        setApp(appInstance);\n        setAuth(authInstance);\n        setDb(dbInstance);\n\n        // 認証状態の監視\n        const unsubscribe = onAuthStateChanged(authInstance, async (currentUser) => {\n            if (currentUser) {\n                setUser(currentUser);\n                setUserId(currentUser.uid);\n                \n                // 認証トークンがある場合はカスタムサインインを試みる（Canvas環境）\n                if (initialAuthToken && currentUser.isAnonymous) {\n                     try {\n                        await withRetry(() => signInWithCustomToken(authInstance, initialAuthToken));\n                        // 成功したらonAuthStateChangedが再度発火するのでここでは何もしない\n                     } catch (e) {\n                        console.error(\"カスタム認証トークンサインインエラー:\", e);\n                        // エラーが発生しても匿名で続行\n                     }\n                }\n\n            } else {\n                // ユーザーがいない場合、匿名サインインを試みる\n                try {\n                    await withRetry(() => signInAnonymously(authInstance));\n                } catch (e) {\n                    console.error(\"匿名サインインエラー:\", e);\n                    setError('匿名サインインに失敗しました。アプリケーションをロードできません。');\n                }\n            }\n            setIsAuthReady(true);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // 2. ユーザープロファイルのロード\n    useEffect(() => {\n        if (db && userId) {\n            const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/profile/data`);\n            \n            const unsubscribeProfile = onSnapshot(userDocRef, (docSnap) => {\n                if (docSnap.exists()) {\n                    const profile = docSnap.data();\n                    setUserProfile(profile);\n                    // ロールに基づいてビューを切り替え\n                    if (profile.role === 'manager') {\n                        setView('ManagerShiftView');\n                    } else {\n                        setView('StaffShiftView');\n                    }\n                } else {\n                    setUserProfile(null);\n                    // プロファイルが存在しない場合は登録画面へ誘導\n                    setView('RegisterUser');\n                }\n            }, (error) => {\n                console.error(\"ユーザープロファイル読み込みエラー:\", error);\n                setError(`プロファイル読み込みエラー: ${error.message}`);\n            });\n            \n            return () => unsubscribeProfile();\n        }\n    }, [db, userId]);\n\n    // 3. 全シフトデータの購読 (公開データ)\n    useEffect(() => {\n        if (db && userProfile) {\n            const shiftsColRef = collection(db, `artifacts/${appId}/public/data/shifts`);\n            // Note: We avoid orderBy here to prevent index errors. Data will be sorted in memory.\n            const q = query(shiftsColRef); \n\n            const unsubscribeShifts = onSnapshot(q, (snapshot) => {\n                const fetchedShifts = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n                setShifts(fetchedShifts);\n            }, (error) => {\n                console.error(\"シフトデータ読み込みエラー:\", error);\n                setError(`シフトデータの読み込みに失敗しました: ${error.message}`);\n            });\n\n            return () => unsubscribeShifts();\n        }\n    }, [db, userProfile]);\n\n    // 4. 全ユーザーデータの購読 (マネージャー向け、またはスタッフ名解決用)\n    useEffect(() => {\n        if (db && userProfile) {\n            const usersColRef = collection(db, `artifacts/${appId}/users`);\n\n            const unsubscribeUsers = onSnapshot(usersColRef, (snapshot) => {\n                const fetchedUsers = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    ...doc.data().profile?.data // assuming profile/data structure from registration\n                })).filter(u => u.name && u.role); // 有効なユーザーのみをフィルタ\n\n                setUsers(fetchedUsers);\n            }, (error) => {\n                console.error(\"ユーザーデータ読み込みエラー:\", error);\n            });\n\n            return () => unsubscribeUsers();\n        }\n    }, [db, userProfile]);\n\n\n    // 5. メインコンテンツのレンダリング\n    const renderContent = useMemo(() => {\n        if (!isAuthReady) {\n            return (\n                <div className=\"flex justify-center items-center h-full\">\n                    <div className=\"animate-pulse text-indigo-500\">アプリケーションを初期化中...</div>\n                </div>\n            );\n        }\n\n        if (!isAuthenticated || view === 'LoginScreen') {\n            return <LoginScreen auth={auth} setView={setView} isAuthReady={isAuthReady} />;\n        }\n        \n        if (!userProfile && view !== 'RegisterUser') {\n            return (\n                <div className=\"p-6 text-center\">\n                    <p className=\"text-xl text-red-500 mb-4\">ユーザープロファイルが見つかりません。</p>\n                    <button \n                        onClick={() => setView('RegisterUser')}\n                        className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300\"\n                    >\n                        プロファイルを登録する\n                    </button>\n                </div>\n            );\n        }\n\n        switch (view) {\n            case 'RegisterUser':\n                return <RegisterUser db={db} userId={userId} setView={setView} setLoading={setLoading} setError={setError} />;\n            \n            case 'StaffShiftView':\n                return <StaffShiftView \n                    shifts={shifts} \n                    userId={userId} \n                    db={db} \n                    appId={appId} \n                    setLoading={setLoading} \n                    setError={setError} \n                    setView={setView}\n                />;\n            \n            case 'ManagerShiftView':\n                return <ManagerShiftView \n                    shifts={shifts} \n                    setView={setView} \n                    setSelectedShift={setSelectedShift}\n                    userId={userId}\n                />;\n            \n            case 'ManagerCreate':\n                return <ManagerCreate \n                    db={db} \n                    userId={userId} \n                    setError={setError} \n                    setLoading={setLoading} \n                    userProfile={userProfile}\n                    setSuccessMessage={setSuccessMessage} // 成功メッセージハンドラを追加\n                />;\n            \n            case 'ShiftAnalysis':\n                return <ShiftAnalysis \n                    selectedShift={selectedShift} \n                    setView={setView} \n                    userId={userId} \n                    users={users}\n                    db={db} \n                    appId={appId} \n                    setError={setError} \n                    setLoading={setLoading}\n                    setSuccessMessage={setSuccessMessage} // 成功メッセージハンドラを追加\n                />;\n            \n            case 'StaffWorkHours':\n                return <div className=\"p-6\"><h2 className=\"text-2xl font-bold\">あなたの勤務時間</h2><p>このビューにロジックを追加します。</p></div>;\n            case 'ManagerAttendance':\n                return <div className=\"p-6\"><h2 className=\"text-2xl font-bold\">従業員出勤簿</h2><p>このビューにロジックを追加します。</p></div>;\n\n            default:\n                return <div className=\"p-6 text-center text-red-500\">無効なビューです。</div>;\n        }\n    }, [view, isAuthReady, isAuthenticated, userProfile, auth, userId, db, shifts, selectedShift, users, setSuccessMessage]);\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 font-sans p-4 sm:p-8\">\n            <style jsx=\"true\">{`\n                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n                .font-sans {\n                    font-family: 'Inter', sans-serif;\n                }\n            `}</style>\n            \n            <header className=\"flex justify-between items-center mb-6 p-4 bg-white rounded-xl shadow-lg\">\n                <h1 className=\"text-2xl font-bold text-indigo-600\">\n                    {userProfile ? `${userProfile.name} の ${isManager ? '管理' : 'スタッフ'} ダッシュボード` : 'シフト管理'}\n                </h1>\n                {isAuthenticated && auth && (\n                    <button\n                        onClick={async () => {\n                            try {\n                                await signOut(auth);\n                                setUser(null);\n                                setUserProfile(null);\n                                setView('LoginScreen');\n                                console.log(\"サインアウトしました。\");\n                            } catch (e) {\n                                console.error(\"サインアウトエラー:\", e);\n                            }\n                        }}\n                        className=\"bg-red-500 hover:bg-red-600 text-white text-sm font-semibold py-2 px-4 rounded-lg shadow transition duration-300\"\n                    >\n                        サインアウト\n                    </button>\n                )}\n            </header>\n\n            {/* サイドバー（マネージャーのみ表示） */}\n            {isAuthenticated && userProfile && (\n                <div className=\"flex flex-col lg:flex-row gap-6\">\n                    {isManager && (\n                        <nav className=\"w-full lg:w-64 bg-white p-4 rounded-xl shadow-lg h-fit\">\n                            <h3 className=\"text-lg font-bold text-gray-700 mb-3 border-b pb-2\">ナビゲーション</h3>\n                            <ul className=\"space-y-2\">\n                                {['ManagerShiftView', 'ManagerCreate', 'ManagerAttendance'].map(navView => (\n                                    <li key={navView}>\n                                        <button\n                                            onClick={() => {\n                                                setView(navView);\n                                                setSelectedShift(null); // シフト詳細をリセット\n                                            }}\n                                            className={`w-full text-left p-2 rounded-lg font-medium transition duration-200 ${\n                                                view === navView ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'\n                                            }`}\n                                        >\n                                            {navView === 'ManagerShiftView' && '全てのシフトを見る'}\n                                            {navView === 'ManagerCreate' && 'シフトを作成'}\n                                            {navView === 'ManagerAttendance' && '出勤簿管理'}\n                                        </button>\n                                    </li>\n                                ))}\n                            </ul>\n                        </nav>\n                    )}\n                    \n                    {/* メインビュー */}\n                    <main className=\"flex-1\">\n                        {error && (\n                            <div className=\"p-4 mb-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n                                <strong>エラー:</strong> {error}\n                            </div>\n                        )}\n                        {successMessage && ( // Success Message 表示\n                            <div className=\"p-4 mb-4 bg-green-100 border border-green-400 text-green-700 rounded-lg\">\n                                <strong>成功:</strong> {successMessage}\n                            </div>\n                        )}\n                        {loading && (\n                            <div className=\"flex items-center justify-center p-4 mb-4 bg-yellow-100 text-yellow-700 rounded-lg\">\n                                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-700 mr-3\"></div>\n                                処理中...\n                            </div>\n                        )}\n\n                        <AuthStatus userId={userId} isManager={isManager} />\n                        <div className=\"bg-white rounded-xl shadow-lg min-h-[60vh]\">\n                            {renderContent}\n                        </div>\n                    </main>\n                </div>\n            )}\n            \n            {/* 非認証時/初期ロード時の画面 */}\n            {!isAuthenticated && isAuthReady && (\n                <div className=\"h-[80vh]\">\n                    {renderContent}\n                </div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}