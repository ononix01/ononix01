{"ast":null,"code":"import _objectSpread from\"C:/Users/kouki/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{supabase}from'./supabaseClient';// ----------------------------------------------------------------------\n// 共通ヘルパー関数\n// ----------------------------------------------------------------------\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const timeToMinutes=time=>{if(!time)return 0;const parts=time.split(':').map(Number);return parts[0]*60+parts[1];};const calculateWorkMinutes=(start,end,breakMinutes)=>{if(!start||!end)return 0;let startMinutes=timeToMinutes(start);let endMinutes=timeToMinutes(end);let breakMins=breakMinutes||0;if(endMinutes<startMinutes){endMinutes+=24*60;}const workMinutes=endMinutes-startMinutes;return Math.max(0,workMinutes-breakMins);};const calculateWorkMinutesInPeriod=(actualStart,actualEnd,breakMinutes,periodStartMinutes,periodEndMinutes)=>{if(!actualStart||!actualEnd)return 0;let start=timeToMinutes(actualStart);let end=timeToMinutes(actualEnd);if(end<start){end+=24*60;}const overlapStart=Math.max(start,periodStartMinutes);const overlapEnd=Math.min(end,periodEndMinutes);if(overlapEnd<=overlapStart){return 0;}let workInPeriod=overlapEnd-overlapStart;const totalWorkDuration=end-start;if(totalWorkDuration>0&&breakMinutes>0){const breakRatio=breakMinutes/totalWorkDuration;const breakDeduction=workInPeriod*breakRatio;workInPeriod-=breakDeduction;}return Math.max(0,Math.round(workInPeriod));};const formatMinutes=totalMinutes=>{const hours=Math.floor(totalMinutes/60);const minutes=totalMinutes%60;if(totalMinutes<0)return'0時間0分';return\"\".concat(hours,\"\\u6642\\u9593\").concat(minutes,\"\\u5206\");};// ----------------------------------------------------------------------\n// TimePeriodEditor (集計時間帯設定コンポーネント)\n// ----------------------------------------------------------------------\nconst TimePeriodEditor=_ref=>{let{timePeriods,setTimePeriods,onClose}=_ref;const[currentPeriods,setCurrentPeriods]=useState(timePeriods);const[newPeriod,setNewPeriod]=useState({label:'',start:'00:00',end:'00:00'});const[nextId,setNextId]=useState(Math.max(0,...timePeriods.map(p=>p.id))+1);const handleUpdate=(id,field,value)=>{setCurrentPeriods(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{[field]:value}):p));};const handleDelete=id=>{setCurrentPeriods(prev=>prev.filter(p=>p.id!==id));};const handleAdd=()=>{if(!newPeriod.label||!newPeriod.start||!newPeriod.end){alert(\"ラベル、開始時刻、終了時刻をすべて入力してください。\");return;}const newKey=\"period\".concat(nextId);const periodToAdd={id:nextId,key:newKey,label:newPeriod.label,start:newPeriod.start,end:newPeriod.end};setCurrentPeriods(prev=>[...prev,periodToAdd]);setNextId(nextId+1);setNewPeriod({label:'',start:'00:00',end:'00:00'});};const handleSave=()=>{currentPeriods.sort((a,b)=>timeToMinutes(a.start)-timeToMinutes(b.start));setTimePeriods(currentPeriods);onClose();};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1.5rem',border:'1px solid #ccc',borderRadius:'8px',backgroundColor:'#f9f9f9',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"\\u96C6\\u8A08\\u6642\\u9593\\u5E2F\\u306E\\u7DE8\\u96C6\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflowY:'auto',marginBottom:'1rem'},children:currentPeriods.map(p=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center',marginBottom:'0.5rem',padding:'0.5rem',borderBottom:'1px dotted #ddd'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:p.label,onChange:e=>handleUpdate(p.id,'label',e.target.value),placeholder:\"\\u30E9\\u30D9\\u30EB\",style:{flex:1,padding:'0.25rem'}}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:p.start,onChange:e=>handleUpdate(p.id,'start',e.target.value),style:{width:'80px',padding:'0.25rem'},step:\"60\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u301C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:p.end,onChange:e=>handleUpdate(p.id,'end',e.target.value),style:{width:'80px',padding:'0.25rem'},step:\"60\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(p.id),style:{padding:'0.25rem 0.5rem',backgroundColor:'#F44336',color:'white',border:'none',borderRadius:'4px'},children:\"\\u524A\\u9664\"})]},p.id))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center',marginBottom:'1rem',borderTop:'1px solid #ddd',paddingTop:'1rem'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPeriod.label,onChange:e=>setNewPeriod(_objectSpread(_objectSpread({},newPeriod),{},{label:e.target.value})),placeholder:\"\\u65B0\\u3057\\u3044\\u30E9\\u30D9\\u30EB\",style:{flex:1,padding:'0.25rem'}}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:newPeriod.start,onChange:e=>setNewPeriod(_objectSpread(_objectSpread({},newPeriod),{},{start:e.target.value})),style:{width:'80px',padding:'0.25rem'},step:\"60\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u301C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:newPeriod.end,onChange:e=>setNewPeriod(_objectSpread(_objectSpread({},newPeriod),{},{end:e.target.value})),style:{width:'80px',padding:'0.25rem'},step:\"60\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAdd,style:{padding:'0.25rem 0.5rem',backgroundColor:'#4CAF50',color:'white',border:'none',borderRadius:'4px'},children:\"\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right',display:'flex',gap:'1rem',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{padding:'0.5rem 1rem',backgroundColor:'#9E9E9E',color:'white',border:'none',borderRadius:'4px'},children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,style:{padding:'0.5rem 1rem',backgroundColor:'#2196F3',color:'white',border:'none',borderRadius:'4px'},children:\"\\u8A2D\\u5B9A\\u3092\\u4FDD\\u5B58\"})]})]});};// ----------------------------------------------------------------------\n// SummaryView (勤務時間集計モードのサブコンポーネント)\n// ----------------------------------------------------------------------\nconst SummaryView=_ref2=>{let{userMap,availableDates,onBackToCalendar}=_ref2;const[attendanceRecords,setAttendanceRecords]=useState([]);const[filter,setFilter]=useState('monthly');const[selectedYear,setSelectedYear]=useState(new Date().getFullYear().toString());const[selectedPeriod,setSelectedPeriod]=useState(new Date().toISOString().split('T')[0].substring(0,7));const[selectedUser,setSelectedUser]=useState('');const[loading,setLoading]=useState(true);const[isEditingPeriods,setIsEditingPeriods]=useState(false);const[timePeriods,setTimePeriods]=useState(()=>[{id:1,key:'period1',label:'午前時間',start:'00:00',end:'12:00'},{id:2,key:'period2',label:'午後時間',start:'12:00',end:'18:00'},{id:3,key:'period3',label:'夜間時間',start:'18:00',end:'00:00'}]);useEffect(()=>{fetchAllAttendanceRecords();},[]);const userList=useMemo(()=>{const users=Object.entries(userMap).map(_ref3=>{let[manager_number,name]=_ref3;return{manager_number:String(manager_number),name};});users.sort((a,b)=>a.name.localeCompare(b.name));return[{manager_number:'',name:'全従業員'},...users];},[userMap]);const availableYears=useMemo(()=>{const years=new Set(availableDates.map(d=>new Date(d).getFullYear().toString()));const sortedYears=Array.from(years).sort((a,b)=>b.localeCompare(a));const currentYear=new Date().getFullYear().toString();if(!years.has(currentYear)){sortedYears.unshift(currentYear);}return sortedYears;},[availableDates]);const filteredAvailablePeriods=useMemo(()=>{const yearPrefix=selectedYear;if(filter==='monthly'){const months=new Set();availableDates.forEach(d=>{if(d.startsWith(yearPrefix)){months.add(d.substring(0,7));}});return Array.from(months).sort((a,b)=>b.localeCompare(a));}else if(filter==='daily'){const days=availableDates.filter(d=>d.startsWith(yearPrefix));return days.sort((a,b)=>b.localeCompare(a));}return[];},[availableDates,selectedYear,filter]);useEffect(()=>{if(filteredAvailablePeriods.length>0){setSelectedPeriod(filteredAvailablePeriods[0]);}else{setSelectedPeriod('');}},[selectedYear,filter,filteredAvailablePeriods]);const fetchAllAttendanceRecords=async()=>{setLoading(true);try{const{data,error}=await supabase.from('attendance').select('*').not('work_minutes','is',null).order('date',{ascending:false});if(error){console.error('集計データ取得エラー:',error);alert('集計データの取得に失敗しました');return;}setAttendanceRecords(data||[]);}catch(error){console.error('データ取得エラー:',error);}finally{setLoading(false);}};const aggregatedData=useMemo(()=>{let recordsToAggregate=attendanceRecords.filter(record=>record.work_minutes>0);recordsToAggregate=recordsToAggregate.filter(record=>{const dateStr=record.date;if(filter==='monthly'){return dateStr.startsWith(selectedPeriod);}else if(filter==='daily'){return dateStr===selectedPeriod;}return false;});if(selectedUser){recordsToAggregate=recordsToAggregate.filter(record=>String(record.manager_number)===String(selectedUser));}const calculatedTimePeriods=timePeriods.map(p=>{const startMinutes=timeToMinutes(p.start);let endMinutes=timeToMinutes(p.end);if(endMinutes<=startMinutes){endMinutes+=24*60;}return _objectSpread(_objectSpread({},p),{},{startMinutes:startMinutes,endMinutes:endMinutes});});const totals={};recordsToAggregate.forEach(record=>{const managerNumber=record.manager_number;if(!totals[managerNumber]){totals[managerNumber]={manager_number:managerNumber,name:userMap[managerNumber]||\"\\u7BA1\\u7406\\u756A\\u53F7: \".concat(managerNumber),totalMinutes:0};calculatedTimePeriods.forEach(p=>{totals[managerNumber][p.key]=0;});}totals[managerNumber].totalMinutes+=record.work_minutes;calculatedTimePeriods.forEach(period=>{const minutesInPeriod=calculateWorkMinutesInPeriod(record.actual_start,record.actual_end,record.break_minutes,period.startMinutes,period.endMinutes);totals[managerNumber][period.key]+=minutesInPeriod;});});return Object.values(totals).sort((a,b)=>b.totalMinutes-a.totalMinutes);},[attendanceRecords,selectedPeriod,selectedUser,userMap,timePeriods,filter]);const renderPeriodSelector=()=>{if(filteredAvailablePeriods.length===0){return/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.5rem',color:'#999'},children:\"\\u30C7\\u30FC\\u30BF\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"});}return/*#__PURE__*/_jsx(\"select\",{value:selectedPeriod,onChange:e=>setSelectedPeriod(e.target.value),style:{padding:'0.5rem',borderRadius:'4px',border:'1px solid #ddd'},children:filteredAvailablePeriods.map(period=>/*#__PURE__*/_jsx(\"option\",{value:period,children:filter==='monthly'?period.substring(5)+'月':period},period))});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",style:{width:'1100px',maxWidth:'95vw',maxHeight:'90vh',overflowY:'auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{display:'flex',alignItems:'center',gap:'1rem'},children:[\"\\u52E4\\u52D9\\u6642\\u9593\\u96C6\\u8A08\",/*#__PURE__*/_jsx(\"select\",{value:selectedYear,onChange:e=>setSelectedYear(e.target.value),style:{padding:'0.5rem',borderRadius:'4px',border:'1px solid #ddd',fontSize:'1rem'},children:availableYears.map(year=>/*#__PURE__*/_jsxs(\"option\",{value:year,children:[year,\"\\u5E74\\u5EA6\"]},year))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'1rem',marginBottom:'1.5rem',padding:'1rem',border:'1px solid #eee',borderRadius:'8px',backgroundColor:'#fff'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'bold',fontSize:'0.9rem'},children:\"\\u5F93\\u696D\\u54E1\\u9078\\u629E:\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedUser,onChange:e=>setSelectedUser(e.target.value),style:{padding:'0.5rem',borderRadius:'4px',border:'1px solid #ddd'},children:userList.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.manager_number,children:user.name},user.manager_number))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'bold',fontSize:'0.9rem'},children:\"\\u671F\\u9593\\u5358\\u4F4D:\"}),/*#__PURE__*/_jsxs(\"select\",{value:filter,onChange:e=>setFilter(e.target.value),style:{padding:'0.5rem',borderRadius:'4px',border:'1px solid #ddd'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"\\u6708\\u5225\\u96C6\\u8A08\"}),/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:\"\\u65E5\\u5225\\u96C6\\u8A08\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'bold',fontSize:'0.9rem'},children:\"\\u5BFE\\u8C61\\u671F\\u9593:\"}),renderPeriodSelector()]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditingPeriods(true),style:{backgroundColor:'#00BCD4',color:'white',padding:'0.5rem 1rem',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u6642\\u9593\\u5E2F\\u306E\\u7DE8\\u96C6\"})})]}),isEditingPeriods&&/*#__PURE__*/_jsx(TimePeriodEditor,{timePeriods:timePeriods,setTimePeriods:setTimePeriods,onClose:()=>setIsEditingPeriods(false)}),loading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'2rem'},children:\"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"}):/*#__PURE__*/_jsx(\"div\",{style:{border:'1px solid #ddd',borderRadius:'8px',overflowX:'auto',maxHeight:'400px'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',minWidth:'800px',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{style:{position:'sticky',top:0,backgroundColor:'#f5f5f5'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd',textAlign:'left',minWidth:'150px'},children:\"\\u540D\\u524D\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd',textAlign:'right',minWidth:'120px'},children:\"\\u7DCF\\u52E4\\u52D9\\u6642\\u9593\"}),timePeriods.map(p=>/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd',textAlign:'right',minWidth:'150px'},children:p.label},p.key))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:aggregatedData.length>0?aggregatedData.map((data,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:index%2===0?'white':'#f9f9f9'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee'},children:data.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'right',fontWeight:'bold'},children:formatMinutes(data.totalMinutes)}),timePeriods.map(p=>/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'right'},children:formatMinutes(data[p.key]||0)},p.key))]},data.manager_number)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:2+timePeriods.length,style:{textAlign:'center',padding:'1rem',color:'#666'},children:\"\\u9078\\u629E\\u3057\\u305F\\u6761\\u4EF6\\u306B\\u4E00\\u81F4\\u3059\\u308B\\u30C7\\u30FC\\u30BF\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'2rem',textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:onBackToCalendar,style:{backgroundColor:'#607D8B',color:'white',padding:'0.75rem 2rem',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u30AB\\u30EC\\u30F3\\u30C0\\u30FC\\u306B\\u623B\\u308B\"})})]});};// ----------------------------------------------------------------------\n// ManagerAttendance (メインコンポーネント)\n// ----------------------------------------------------------------------\nfunction ManagerAttendance(_ref4){let{onBack}=_ref4;const[selectedDate,setSelectedDate]=useState('');const[attendanceData,setAttendanceData]=useState([]);const[userMap,setUserMap]=useState({});const[loading,setLoading]=useState(false);const[currentMonth,setCurrentMonth]=useState(new Date());const[availableDates,setAvailableDates]=useState([]);const[currentView,setCurrentView]=useState('calendar');useEffect(()=>{fetchAvailableDates();fetchUsers();},[]);const fetchAvailableDates=async()=>{try{const{data:finalShifts,error}=await supabase.from('final_shifts').select('date').order('date');if(error){console.error('日付取得エラー:',error);return;}const uniqueDates=finalShifts?[...new Set(finalShifts.map(item=>item.date))].sort():[];setAvailableDates(uniqueDates);}catch(error){console.error('日付取得エラー:',error);}};const fetchUsers=async()=>{try{const{data:users,error}=await supabase.from('users').select('*');if(error){console.error('ユーザー取得エラー:',error);return;}const userMapTemp={};if(users&&users.length>0){users.forEach(user=>{const managerNumber=user.manager_number;if(managerNumber!==null&&managerNumber!==undefined){userMapTemp[String(managerNumber)]=user.name||\"\\u30E6\\u30FC\\u30B6\\u30FC\".concat(managerNumber);userMapTemp[Number(managerNumber)]=user.name||\"\\u30E6\\u30FC\\u30B6\\u30FC\".concat(managerNumber);}});}setUserMap(userMapTemp);}catch(error){console.error('予期しないエラー:',error);}};const fetchAttendanceData=async date=>{if(!date)return;setLoading(true);try{const{data:finalShifts,error:shiftError}=await supabase.from('final_shifts').select('*').eq('date',date).order('manager_number');if(shiftError){console.error('シフトデータ取得エラー:',shiftError);alert('シフトデータの取得に失敗しました');setLoading(false);return;}const{data:existingAttendance,error:attendanceError}=await supabase.from('attendance').select('*').eq('date',date);if(attendanceError){console.error('勤怠データ取得エラー:',attendanceError);}const attendanceMap={};if(existingAttendance){existingAttendance.forEach(att=>{attendanceMap[att.manager_number]=att;});}const data=finalShifts.map(shift=>{const existing=attendanceMap[shift.manager_number];const isOff=shift.is_off||!shift.start_time||!shift.end_time||shift.start_time==='00:00'&&shift.end_time==='00:00';const trimTime=time=>time?time.substring(0,5):'';return{manager_number:shift.manager_number,name:userMap[shift.manager_number]||\"\\u7BA1\\u7406\\u756A\\u53F7: \".concat(shift.manager_number),scheduled_start:trimTime(shift.start_time),scheduled_end:trimTime(shift.end_time),actual_start:existing!==null&&existing!==void 0&&existing.actual_start?trimTime(existing.actual_start):trimTime(shift.start_time),actual_end:existing!==null&&existing!==void 0&&existing.actual_end?trimTime(existing.actual_end):trimTime(shift.end_time),break_minutes:(existing===null||existing===void 0?void 0:existing.break_minutes)||0,store:shift.store||'',is_off:isOff,attendance_id:(existing===null||existing===void 0?void 0:existing.id)||null};});const sortedData=data.sort((a,b)=>{return a.is_off===b.is_off?0:a.is_off?1:-1;});setAttendanceData(sortedData);setCurrentView('attendance');}catch(error){console.error('データ取得エラー:',error);alert('エラーが発生しました');}finally{setLoading(false);}};const handleTimeChange=(index,field,value)=>{const cleanValue=value?value.substring(0,5):'';const updated=[...attendanceData];updated[index][field]=field==='break_minutes'?Number(value):cleanValue;setAttendanceData(updated);};const handleSave=async()=>{setLoading(true);try{for(const record of attendanceData){// 空の値をnullに変換\nconst actualStart=record.actual_start&&record.actual_start!==''?record.actual_start:null;const actualEnd=record.actual_end&&record.actual_end!==''?record.actual_end:null;// 両方とも空の場合はスキップ\nif(!actualStart&&!actualEnd){continue;}const workMinutes=calculateWorkMinutes(actualStart,actualEnd,record.break_minutes);const attendanceRecord={date:selectedDate,manager_number:record.manager_number,actual_start:actualStart,actual_end:actualEnd,break_minutes:record.break_minutes||0,work_minutes:workMinutes,store:record.store};if(record.attendance_id){const{error}=await supabase.from('attendance').update(attendanceRecord).eq('id',record.attendance_id);if(error){console.error('更新エラー:',error);alert(\"\".concat(record.name,\" \\u306E\\u66F4\\u65B0\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F: \").concat(error.message));setLoading(false);return;}}else{const{error}=await supabase.from('attendance').insert([attendanceRecord]);if(error){console.error('挿入エラー:',error);alert(\"\".concat(record.name,\" \\u306E\\u4FDD\\u5B58\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F: \").concat(error.message));setLoading(false);return;}}}alert('保存しました');fetchAttendanceData(selectedDate);}catch(error){console.error('保存エラー:',error);alert('保存中にエラーが発生しました');}finally{setLoading(false);}};const handleDateSelect=date=>{if(!availableDates.includes(date))return;setSelectedDate(date);fetchAttendanceData(date);};const handleBackToCalendar=()=>{setCurrentView('calendar');setSelectedDate('');setAttendanceData([]);};const changeDate=delta=>{if(!selectedDate||availableDates.length===0)return;const idx=availableDates.indexOf(selectedDate);const newIdx=idx+delta;if(newIdx>=0&&newIdx<availableDates.length){const newDate=availableDates[newIdx];setSelectedDate(newDate);fetchAttendanceData(newDate);}};const generateCalendarDays=()=>{const year=currentMonth.getFullYear();const month=currentMonth.getMonth();const firstDay=new Date(year,month,1);const startDate=new Date(firstDay);startDate.setDate(startDate.getDate()-firstDay.getDay());const days=[];const currentDate=new Date(startDate);for(let i=0;i<42;i++){const dateStr=currentDate.toISOString().split('T')[0];const isCurrentMonth=currentDate.getMonth()===month;const hasShift=availableDates.includes(dateStr);days.push({date:new Date(currentDate),dateStr:dateStr,day:currentDate.getDate(),isCurrentMonth,hasShift});currentDate.setDate(currentDate.getDate()+1);}return days;};const changeMonth=delta=>{const newMonth=new Date(currentMonth);newMonth.setMonth(newMonth.getMonth()+delta);setCurrentMonth(newMonth);};const getWeekday=dateStr=>{const days=['日','月','火','水','木','金','土'];const date=new Date(dateStr);return days[date.getDay()];};const calendarDays=generateCalendarDays();const weekdays=['日','月','火','水','木','金','土'];// ----------------------------------------------------------------------\n// View Rendering\n// ----------------------------------------------------------------------\nif(currentView==='summary'){return/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsx(SummaryView,{userMap:userMap,availableDates:availableDates,onBackToCalendar:handleBackToCalendar})});}if(currentView==='calendar'){return/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",style:{width:'600px',maxWidth:'95vw',maxHeight:'90vh',overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u52E4\\u6020\\u7BA1\\u7406\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem',display:'flex',gap:'0.5rem',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('calendar'),style:{padding:'0.75rem 2rem',backgroundColor:'#2196F3',color:'white',border:'none',borderRadius:'4px',cursor:'not-allowed'},disabled:true,children:\"\\u9000\\u52E4\\u7BA1\\u7406\\u30E2\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('summary'),style:{padding:'0.75rem 2rem',backgroundColor:'#FF9800',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u52E4\\u52D9\\u6642\\u9593\\u96C6\\u8A08\\u30E2\\u30FC\\u30C9\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',border:'1px solid #ddd',borderRadius:'8px',padding:'1rem',backgroundColor:'#f9f9f9'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeMonth(-1),style:{backgroundColor:'#607D8B',color:'white',border:'none',borderRadius:'4px',padding:'0.5rem',cursor:'pointer'},children:\"\\u25C0\"}),/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0},children:[currentMonth.getFullYear(),\"\\u5E74 \",currentMonth.getMonth()+1,\"\\u6708\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeMonth(1),style:{backgroundColor:'#607D8B',color:'white',border:'none',borderRadius:'4px',padding:'0.5rem',cursor:'pointer'},children:\"\\u25B6\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(7, 1fr)',gap:'2px',marginBottom:'0.5rem'},children:weekdays.map(day=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',fontWeight:'bold',padding:'0.5rem',backgroundColor:'#e0e0e0'},children:day},day))}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(7, 1fr)',gap:'2px'},children:calendarDays.map((dayInfo,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>dayInfo.hasShift&&handleDateSelect(dayInfo.dateStr),disabled:!dayInfo.hasShift,style:{padding:'0.5rem',border:'none',borderRadius:'4px',cursor:dayInfo.hasShift?'pointer':'not-allowed',backgroundColor:dayInfo.hasShift?'#E3F2FD':dayInfo.isCurrentMonth?'white':'#f0f0f0',color:!dayInfo.hasShift?'#999':dayInfo.isCurrentMonth?'black':'#666',fontWeight:dayInfo.hasShift?'bold':'normal',opacity:dayInfo.isCurrentMonth?1:0.5,transition:'all 0.3s ease'},children:dayInfo.day},index))})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'2rem',textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:onBack,style:{backgroundColor:'#607D8B',color:'white',padding:'0.75rem 2rem',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u30E1\\u30CB\\u30E5\\u30FC\\u306B\\u623B\\u308B\"})})]})});}// Attendance View (日別勤怠入力)\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",style:{width:'900px',maxWidth:'95vw',maxHeight:'90vh',overflowY:'auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{display:'flex',alignItems:'center',justifyContent:'center',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeDate(-1),children:\"\\u25C0\"}),selectedDate,\" (\",getWeekday(selectedDate),\")\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeDate(1),children:\"\\u25B6\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:'center',color:'#666'},children:[\"\\u30E2\\u30FC\\u30C9: \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u9000\\u52E4\\u7BA1\\u7406\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'2rem'},children:\"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"}):/*#__PURE__*/_jsx(\"div\",{style:{border:'1px solid #ddd',borderRadius:'8px',overflow:'auto',maxHeight:'500px'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{style:{position:'sticky',top:0,backgroundColor:'#f5f5f5'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u540D\\u524D\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u5E97\\u8217\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u4E88\\u5B9A\\u958B\\u59CB\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u4E88\\u5B9A\\u7D42\\u4E86\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u5B9F\\u969B\\u958B\\u59CB\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u5B9F\\u969B\\u7D42\\u4E86\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u4F11\\u61A9(\\u5206)\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem',borderBottom:'1px solid #ddd'},children:\"\\u52B4\\u50CD\\u6642\\u9593\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendanceData.map((record,index)=>{const workMinutes=calculateWorkMinutes(record.actual_start,record.actual_end,record.break_minutes);const rowBackgroundColor=record.is_off?'#f0f0f0':index%2===0?'white':'#e8f5e9';return/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:rowBackgroundColor},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee'},children:record.name}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'center'},children:[record.store,\"\\u5E97\\u8217\"]}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'center'},children:record.is_off?/*#__PURE__*/_jsx(\"span\",{style:{color:'#999'},children:\"\\u4F11\\u307F\"}):record.scheduled_start}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'center'},children:record.is_off?/*#__PURE__*/_jsx(\"span\",{style:{color:'#999'},children:\"\\u4F11\\u307F\"}):record.scheduled_end}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee'},children:/*#__PURE__*/_jsxs(\"select\",{value:record.actual_start,onChange:e=>handleTimeChange(index,'actual_start',e.target.value),style:{width:'100px',padding:'0.25rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--:--\"}),Array.from({length:36},(_,i)=>{const timeStr=\"\".concat(String(i).padStart(2,'0'),\":00\");return/*#__PURE__*/_jsx(\"option\",{value:timeStr,children:timeStr},timeStr);})]})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee'},children:/*#__PURE__*/_jsxs(\"select\",{value:record.actual_end,onChange:e=>handleTimeChange(index,'actual_end',e.target.value),style:{width:'100px',padding:'0.25rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--:--\"}),Array.from({length:36},(_,i)=>{const timeStr=\"\".concat(String(i).padStart(2,'0'),\":00\");return/*#__PURE__*/_jsx(\"option\",{value:timeStr,children:timeStr},timeStr);})]})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee'},children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:record.break_minutes,onChange:e=>handleTimeChange(index,'break_minutes',e.target.value),style:{width:'60px',padding:'0.25rem'}})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',borderBottom:'1px solid #eee',textAlign:'center',fontWeight:'bold'},children:workMinutes>0?formatMinutes(workMinutes):'-'})]},index);})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',display:'flex',gap:'1rem',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:loading,style:{backgroundColor:'#4CAF50',color:'white',padding:'0.75rem 2rem',border:'none',borderRadius:'4px',cursor:loading?'not-allowed':'pointer',opacity:loading?0.6:1},children:loading?'保存中...':'確定'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToCalendar,style:{backgroundColor:'#607D8B',color:'white',padding:'0.75rem 2rem',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u30AB\\u30EC\\u30F3\\u30C0\\u30FC\\u306B\\u623B\\u308B\"})]})]})});}export default ManagerAttendance;","map":{"version":3,"names":["React","useState","useEffect","useMemo","supabase","jsx","_jsx","jsxs","_jsxs","timeToMinutes","time","parts","split","map","Number","calculateWorkMinutes","start","end","breakMinutes","startMinutes","endMinutes","breakMins","workMinutes","Math","max","calculateWorkMinutesInPeriod","actualStart","actualEnd","periodStartMinutes","periodEndMinutes","overlapStart","overlapEnd","min","workInPeriod","totalWorkDuration","breakRatio","breakDeduction","round","formatMinutes","totalMinutes","hours","floor","minutes","concat","TimePeriodEditor","_ref","timePeriods","setTimePeriods","onClose","currentPeriods","setCurrentPeriods","newPeriod","setNewPeriod","label","nextId","setNextId","p","id","handleUpdate","field","value","prev","_objectSpread","handleDelete","filter","handleAdd","alert","newKey","periodToAdd","key","handleSave","sort","a","b","style","padding","border","borderRadius","backgroundColor","marginBottom","children","marginTop","maxHeight","overflowY","display","gap","alignItems","borderBottom","type","onChange","e","target","placeholder","flex","width","step","onClick","color","borderTop","paddingTop","textAlign","justifyContent","SummaryView","_ref2","userMap","availableDates","onBackToCalendar","attendanceRecords","setAttendanceRecords","setFilter","selectedYear","setSelectedYear","Date","getFullYear","toString","selectedPeriod","setSelectedPeriod","toISOString","substring","selectedUser","setSelectedUser","loading","setLoading","isEditingPeriods","setIsEditingPeriods","fetchAllAttendanceRecords","userList","users","Object","entries","_ref3","manager_number","name","String","localeCompare","availableYears","years","Set","d","sortedYears","Array","from","currentYear","has","unshift","filteredAvailablePeriods","yearPrefix","months","forEach","startsWith","add","days","length","data","error","select","not","order","ascending","console","aggregatedData","recordsToAggregate","record","work_minutes","dateStr","date","calculatedTimePeriods","totals","managerNumber","period","minutesInPeriod","actual_start","actual_end","break_minutes","values","renderPeriodSelector","className","maxWidth","fontSize","year","flexWrap","flexDirection","fontWeight","user","cursor","overflowX","minWidth","borderCollapse","position","top","index","colSpan","ManagerAttendance","_ref4","onBack","selectedDate","setSelectedDate","attendanceData","setAttendanceData","setUserMap","currentMonth","setCurrentMonth","setAvailableDates","currentView","setCurrentView","fetchAvailableDates","fetchUsers","finalShifts","uniqueDates","item","userMapTemp","undefined","fetchAttendanceData","shiftError","eq","existingAttendance","attendanceError","attendanceMap","att","shift","existing","isOff","is_off","start_time","end_time","trimTime","scheduled_start","scheduled_end","store","attendance_id","sortedData","handleTimeChange","cleanValue","updated","attendanceRecord","update","message","insert","handleDateSelect","includes","handleBackToCalendar","changeDate","delta","idx","indexOf","newIdx","newDate","generateCalendarDays","month","getMonth","firstDay","startDate","setDate","getDate","getDay","currentDate","i","isCurrentMonth","hasShift","push","day","changeMonth","newMonth","setMonth","getWeekday","calendarDays","weekdays","disabled","margin","gridTemplateColumns","dayInfo","opacity","transition","overflow","rowBackgroundColor","_","timeStr","padStart"],"sources":["C:/Users/kouki/my-app/src/ManagerAttendance.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { supabase } from './supabaseClient';\r\n\r\n// ----------------------------------------------------------------------\r\n// 共通ヘルパー関数\r\n// ----------------------------------------------------------------------\r\nconst timeToMinutes = (time) => {\r\n    if (!time) return 0;\r\n    const parts = time.split(':').map(Number);\r\n    return parts[0] * 60 + parts[1]; \r\n};\r\n\r\nconst calculateWorkMinutes = (start, end, breakMinutes) => {\r\n  if (!start || !end) return 0;\r\n  \r\n  let startMinutes = timeToMinutes(start);\r\n  let endMinutes = timeToMinutes(end);\r\n  let breakMins = breakMinutes || 0;\r\n\r\n  if (endMinutes < startMinutes) {\r\n    endMinutes += 24 * 60; \r\n  }\r\n\r\n  const workMinutes = endMinutes - startMinutes;\r\n  \r\n  return Math.max(0, workMinutes - breakMins);\r\n};\r\n\r\nconst calculateWorkMinutesInPeriod = (actualStart, actualEnd, breakMinutes, periodStartMinutes, periodEndMinutes) => {\r\n    if (!actualStart || !actualEnd) return 0;\r\n\r\n    let start = timeToMinutes(actualStart);\r\n    let end = timeToMinutes(actualEnd);\r\n\r\n    if (end < start) {\r\n        end += 24 * 60;\r\n    }\r\n    \r\n    const overlapStart = Math.max(start, periodStartMinutes);\r\n    const overlapEnd = Math.min(end, periodEndMinutes);\r\n\r\n    if (overlapEnd <= overlapStart) {\r\n        return 0;\r\n    }\r\n\r\n    let workInPeriod = overlapEnd - overlapStart;\r\n    const totalWorkDuration = end - start;\r\n\r\n    if (totalWorkDuration > 0 && breakMinutes > 0) {\r\n        const breakRatio = breakMinutes / totalWorkDuration;\r\n        const breakDeduction = workInPeriod * breakRatio;\r\n        workInPeriod -= breakDeduction;\r\n    }\r\n\r\n    return Math.max(0, Math.round(workInPeriod));\r\n};\r\n\r\nconst formatMinutes = (totalMinutes) => {\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const minutes = totalMinutes % 60;\r\n    if (totalMinutes < 0) return '0時間0分'; \r\n    return `${hours}時間${minutes}分`;\r\n};\r\n\r\n// ----------------------------------------------------------------------\r\n// TimePeriodEditor (集計時間帯設定コンポーネント)\r\n// ----------------------------------------------------------------------\r\nconst TimePeriodEditor = ({ timePeriods, setTimePeriods, onClose }) => {\r\n    const [currentPeriods, setCurrentPeriods] = useState(timePeriods);\r\n    const [newPeriod, setNewPeriod] = useState({ label: '', start: '00:00', end: '00:00' });\r\n    const [nextId, setNextId] = useState(Math.max(0, ...timePeriods.map(p => p.id)) + 1);\r\n\r\n    const handleUpdate = (id, field, value) => {\r\n        setCurrentPeriods(prev => prev.map(p => \r\n            p.id === id ? { ...p, [field]: value } : p\r\n        ));\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        setCurrentPeriods(prev => prev.filter(p => p.id !== id));\r\n    };\r\n\r\n    const handleAdd = () => {\r\n        if (!newPeriod.label || !newPeriod.start || !newPeriod.end) {\r\n            alert(\"ラベル、開始時刻、終了時刻をすべて入力してください。\");\r\n            return;\r\n        }\r\n\r\n        const newKey = `period${nextId}`; \r\n\r\n        const periodToAdd = {\r\n            id: nextId,\r\n            key: newKey, \r\n            label: newPeriod.label,\r\n            start: newPeriod.start,\r\n            end: newPeriod.end,\r\n        };\r\n        \r\n        setCurrentPeriods(prev => [...prev, periodToAdd]);\r\n        setNextId(nextId + 1);\r\n        setNewPeriod({ label: '', start: '00:00', end: '00:00' });\r\n    };\r\n\r\n    const handleSave = () => {\r\n        currentPeriods.sort((a, b) => timeToMinutes(a.start) - timeToMinutes(b.start));\r\n        setTimePeriods(currentPeriods);\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '1.5rem', border: '1px solid #ccc', borderRadius: '8px', backgroundColor: '#f9f9f9', marginBottom: '2rem' }}>\r\n            <h3 style={{ marginTop: 0 }}>集計時間帯の編集</h3>\r\n            \r\n            <div style={{ maxHeight: '200px', overflowY: 'auto', marginBottom: '1rem' }}>\r\n                {currentPeriods.map((p) => (\r\n                    <div key={p.id} style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', marginBottom: '0.5rem', padding: '0.5rem', borderBottom: '1px dotted #ddd' }}>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={p.label}\r\n                            onChange={(e) => handleUpdate(p.id, 'label', e.target.value)}\r\n                            placeholder=\"ラベル\"\r\n                            style={{ flex: 1, padding: '0.25rem' }}\r\n                        />\r\n                        <input\r\n                            type=\"time\"\r\n                            value={p.start}\r\n                            onChange={(e) => handleUpdate(p.id, 'start', e.target.value)}\r\n                            style={{ width: '80px', padding: '0.25rem' }}\r\n                            step=\"60\"\r\n                        />\r\n                        <span>〜</span>\r\n                        <input\r\n                            type=\"time\"\r\n                            value={p.end}\r\n                            onChange={(e) => handleUpdate(p.id, 'end', e.target.value)}\r\n                            style={{ width: '80px', padding: '0.25rem' }}\r\n                            step=\"60\"\r\n                        />\r\n                        <button onClick={() => handleDelete(p.id)} style={{ padding: '0.25rem 0.5rem', backgroundColor: '#F44336', color: 'white', border: 'none', borderRadius: '4px' }}>\r\n                            削除\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', marginBottom: '1rem', borderTop: '1px solid #ddd', paddingTop: '1rem' }}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={newPeriod.label}\r\n                    onChange={(e) => setNewPeriod({ ...newPeriod, label: e.target.value })}\r\n                    placeholder=\"新しいラベル\"\r\n                    style={{ flex: 1, padding: '0.25rem' }}\r\n                />\r\n                <input\r\n                    type=\"time\"\r\n                    value={newPeriod.start}\r\n                    onChange={(e) => setNewPeriod({ ...newPeriod, start: e.target.value })}\r\n                    style={{ width: '80px', padding: '0.25rem' }}\r\n                    step=\"60\"\r\n                />\r\n                <span>〜</span>\r\n                <input\r\n                    type=\"time\"\r\n                    value={newPeriod.end}\r\n                    onChange={(e) => setNewPeriod({ ...newPeriod, end: e.target.value })}\r\n                    style={{ width: '80px', padding: '0.25rem' }}\r\n                    step=\"60\"\r\n                />\r\n                <button onClick={handleAdd} style={{ padding: '0.25rem 0.5rem', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}>\r\n                    追加\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ textAlign: 'right', display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n                <button onClick={onClose} style={{ padding: '0.5rem 1rem', backgroundColor: '#9E9E9E', color: 'white', border: 'none', borderRadius: '4px' }}>\r\n                    キャンセル\r\n                </button>\r\n                <button onClick={handleSave} style={{ padding: '0.5rem 1rem', backgroundColor: '#2196F3', color: 'white', border: 'none', borderRadius: '4px' }}>\r\n                    設定を保存\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// ----------------------------------------------------------------------\r\n// SummaryView (勤務時間集計モードのサブコンポーネント)\r\n// ----------------------------------------------------------------------\r\n\r\nconst SummaryView = ({ userMap, availableDates, onBackToCalendar }) => {\r\n  const [attendanceRecords, setAttendanceRecords] = useState([]);\r\n  const [filter, setFilter] = useState('monthly'); \r\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear().toString());\r\n  const [selectedPeriod, setSelectedPeriod] = useState(new Date().toISOString().split('T')[0].substring(0, 7)); \r\n  const [selectedUser, setSelectedUser] = useState(''); \r\n  const [loading, setLoading] = useState(true);\r\n  const [isEditingPeriods, setIsEditingPeriods] = useState(false);\r\n\r\n  const [timePeriods, setTimePeriods] = useState(() => ([\r\n      { id: 1, key: 'period1', label: '午前時間', start: '00:00', end: '12:00' },\r\n      { id: 2, key: 'period2', label: '午後時間', start: '12:00', end: '18:00' },\r\n      { id: 3, key: 'period3', label: '夜間時間', start: '18:00', end: '00:00' },\r\n  ]));\r\n\r\n  useEffect(() => {\r\n    fetchAllAttendanceRecords();\r\n  }, []);\r\n\r\n  const userList = useMemo(() => {\r\n    const users = Object.entries(userMap).map(([manager_number, name]) => ({ manager_number: String(manager_number), name }));\r\n    users.sort((a, b) => a.name.localeCompare(b.name));\r\n    return [{ manager_number: '', name: '全従業員' }, ...users];\r\n  }, [userMap]);\r\n\r\n  const availableYears = useMemo(() => {\r\n    const years = new Set(availableDates.map(d => new Date(d).getFullYear().toString()));\r\n    const sortedYears = Array.from(years).sort((a, b) => b.localeCompare(a));\r\n    \r\n    const currentYear = new Date().getFullYear().toString();\r\n    if (!years.has(currentYear)) {\r\n        sortedYears.unshift(currentYear);\r\n    }\r\n\r\n    return sortedYears;\r\n  }, [availableDates]);\r\n\r\n\r\n  const filteredAvailablePeriods = useMemo(() => {\r\n    const yearPrefix = selectedYear;\r\n\r\n    if (filter === 'monthly') {\r\n        const months = new Set();\r\n        availableDates.forEach(d => {\r\n            if (d.startsWith(yearPrefix)) {\r\n                months.add(d.substring(0, 7));\r\n            }\r\n        });\r\n        return Array.from(months).sort((a, b) => b.localeCompare(a));\r\n    } else if (filter === 'daily') {\r\n        const days = availableDates.filter(d => d.startsWith(yearPrefix));\r\n        return days.sort((a, b) => b.localeCompare(a));\r\n    }\r\n    return [];\r\n  }, [availableDates, selectedYear, filter]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (filteredAvailablePeriods.length > 0) {\r\n        setSelectedPeriod(filteredAvailablePeriods[0]);\r\n    } else {\r\n        setSelectedPeriod('');\r\n    }\r\n  }, [selectedYear, filter, filteredAvailablePeriods]);\r\n\r\n\r\n  const fetchAllAttendanceRecords = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('attendance')\r\n        .select('*')\r\n        .not('work_minutes', 'is', null) \r\n        .order('date', { ascending: false });\r\n\r\n      if (error) {\r\n        console.error('集計データ取得エラー:', error);\r\n        alert('集計データの取得に失敗しました');\r\n        return;\r\n      }\r\n      setAttendanceRecords(data || []);\r\n    } catch (error) {\r\n      console.error('データ取得エラー:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const aggregatedData = useMemo(() => {\r\n    let recordsToAggregate = attendanceRecords.filter(record => record.work_minutes > 0);\r\n\r\n    recordsToAggregate = recordsToAggregate.filter(record => {\r\n      const dateStr = record.date;\r\n      \r\n      if (filter === 'monthly') {\r\n          return dateStr.startsWith(selectedPeriod);\r\n      } else if (filter === 'daily') {\r\n          return dateStr === selectedPeriod;\r\n      }\r\n      return false; \r\n    });\r\n\r\n    if (selectedUser) {\r\n        recordsToAggregate = recordsToAggregate.filter(record => \r\n            String(record.manager_number) === String(selectedUser)\r\n        );\r\n    }\r\n\r\n    const calculatedTimePeriods = timePeriods.map(p => {\r\n        const startMinutes = timeToMinutes(p.start);\r\n        let endMinutes = timeToMinutes(p.end);\r\n        \r\n        if (endMinutes <= startMinutes) { \r\n             endMinutes += 24 * 60;\r\n        }\r\n        \r\n        return {\r\n            ...p,\r\n            startMinutes: startMinutes,\r\n            endMinutes: endMinutes\r\n        };\r\n    });\r\n\r\n\r\n    const totals = {};\r\n    \r\n    recordsToAggregate.forEach(record => {\r\n      const managerNumber = record.manager_number;\r\n      \r\n      if (!totals[managerNumber]) {\r\n        totals[managerNumber] = { \r\n          manager_number: managerNumber,\r\n          name: userMap[managerNumber] || `管理番号: ${managerNumber}`,\r\n          totalMinutes: 0,\r\n        };\r\n        calculatedTimePeriods.forEach(p => {\r\n            totals[managerNumber][p.key] = 0;\r\n        });\r\n      }\r\n      \r\n      totals[managerNumber].totalMinutes += record.work_minutes;\r\n\r\n      calculatedTimePeriods.forEach(period => {\r\n          const minutesInPeriod = calculateWorkMinutesInPeriod(\r\n              record.actual_start,\r\n              record.actual_end,\r\n              record.break_minutes,\r\n              period.startMinutes,\r\n              period.endMinutes\r\n          );\r\n          totals[managerNumber][period.key] += minutesInPeriod;\r\n      });\r\n      \r\n    });\r\n\r\n    return Object.values(totals).sort((a, b) => b.totalMinutes - a.totalMinutes);\r\n\r\n  }, [attendanceRecords, selectedPeriod, selectedUser, userMap, timePeriods, filter]);\r\n\r\n  \r\n  const renderPeriodSelector = () => {\r\n    \r\n    if (filteredAvailablePeriods.length === 0) {\r\n        return <span style={{ padding: '0.5rem', color: '#999' }}>データがありません</span>;\r\n    }\r\n\r\n    return (\r\n      <select \r\n        value={selectedPeriod} \r\n        onChange={(e) => setSelectedPeriod(e.target.value)} \r\n        style={{ padding: '0.5rem', borderRadius: '4px', border: '1px solid #ddd' }}\r\n      >\r\n        {filteredAvailablePeriods.map(period => (\r\n          <option key={period} value={period}>\r\n            {filter === 'monthly' ? period.substring(5) + '月' : period}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-card\" style={{ width: '1100px', maxWidth: '95vw', maxHeight: '90vh', overflowY: 'auto' }}>\r\n      <h2 style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n        勤務時間集計\r\n        <select \r\n            value={selectedYear} \r\n            onChange={(e) => setSelectedYear(e.target.value)} \r\n            style={{ padding: '0.5rem', borderRadius: '4px', border: '1px solid #ddd', fontSize: '1rem' }}\r\n        >\r\n            {availableYears.map(year => (\r\n                <option key={year} value={year}>{year}年度</option>\r\n            ))}\r\n        </select>\r\n      </h2>\r\n\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '1rem', marginBottom: '1.5rem', padding: '1rem', border: '1px solid #eee', borderRadius: '8px', backgroundColor: '#fff' }}>\r\n        \r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n          <label style={{ fontWeight: 'bold', fontSize: '0.9rem' }}>従業員選択:</label>\r\n          <select \r\n            value={selectedUser} \r\n            onChange={(e) => setSelectedUser(e.target.value)} \r\n            style={{ padding: '0.5rem', borderRadius: '4px', border: '1px solid #ddd' }}\r\n          >\r\n            {userList.map(user => (\r\n              <option key={user.manager_number} value={user.manager_number}>{user.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        \r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n          <label style={{ fontWeight: 'bold', fontSize: '0.9rem' }}>期間単位:</label>\r\n          <select \r\n            value={filter} \r\n            onChange={(e) => setFilter(e.target.value)}\r\n            style={{ padding: '0.5rem', borderRadius: '4px', border: '1px solid #ddd' }}\r\n          >\r\n            <option value=\"monthly\">月別集計</option>\r\n            <option value=\"daily\">日別集計</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n          <label style={{ fontWeight: 'bold', fontSize: '0.9rem' }}>対象期間:</label>\r\n          {renderPeriodSelector()}\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', alignItems: 'flex-end' }}>\r\n             <button \r\n                onClick={() => setIsEditingPeriods(true)}\r\n                style={{\r\n                    backgroundColor: '#00BCD4',\r\n                    color: 'white',\r\n                    padding: '0.5rem 1rem',\r\n                    border: 'none',\r\n                    borderRadius: '4px',\r\n                    cursor: 'pointer'\r\n                }}\r\n            >\r\n                時間帯の編集\r\n            </button>\r\n        </div>\r\n      </div>\r\n\r\n      {isEditingPeriods && (\r\n        <TimePeriodEditor \r\n            timePeriods={timePeriods} \r\n            setTimePeriods={setTimePeriods} \r\n            onClose={() => setIsEditingPeriods(false)} \r\n        />\r\n      )}\r\n\r\n      {loading ? (\r\n        <div style={{ textAlign: 'center', padding: '2rem' }}>読み込み中...</div>\r\n      ) : (\r\n        <div style={{\r\n          border: '1px solid #ddd',\r\n          borderRadius: '8px',\r\n          overflowX: 'auto', \r\n          maxHeight: '400px'\r\n        }}>\r\n          <table style={{ width: '100%', minWidth: '800px', borderCollapse: 'collapse' }}>\r\n            <thead style={{ position: 'sticky', top: 0, backgroundColor: '#f5f5f5' }}>\r\n              <tr>\r\n                <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd', textAlign: 'left', minWidth: '150px' }}>名前</th>\r\n                <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd', textAlign: 'right', minWidth: '120px' }}>総勤務時間</th>\r\n                {timePeriods.map(p => (\r\n                    <th key={p.key} style={{ padding: '0.75rem', borderBottom: '1px solid #ddd', textAlign: 'right', minWidth: '150px' }}>\r\n                        {p.label}\r\n                    </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {aggregatedData.length > 0 ? (\r\n                aggregatedData.map((data, index) => (\r\n                  <tr key={data.manager_number} style={{ backgroundColor: index % 2 === 0 ? 'white' : '#f9f9f9' }}>\r\n                    <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee' }}>\r\n                      {data.name}\r\n                    </td>\r\n                    <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'right', fontWeight: 'bold' }}>\r\n                      {formatMinutes(data.totalMinutes)}\r\n                    </td>\r\n                    {timePeriods.map(p => (\r\n                        <td key={p.key} style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'right' }}>\r\n                            {formatMinutes(data[p.key] || 0)}\r\n                        </td>\r\n                    ))}\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan={2 + timePeriods.length} style={{ textAlign: 'center', padding: '1rem', color: '#666' }}>\r\n                    選択した条件に一致するデータがありません。\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginTop: '2rem', textAlign: 'center' }}>\r\n        <button onClick={onBackToCalendar} style={{\r\n          backgroundColor: '#607D8B',\r\n          color: 'white',\r\n          padding: '0.75rem 2rem',\r\n          border: 'none',\r\n          borderRadius: '4px',\r\n          cursor: 'pointer'\r\n        }}>\r\n          カレンダーに戻る\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// ----------------------------------------------------------------------\r\n// ManagerAttendance (メインコンポーネント)\r\n// ----------------------------------------------------------------------\r\nfunction ManagerAttendance({ onBack }) {\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [userMap, setUserMap] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const [availableDates, setAvailableDates] = useState([]);\r\n  const [currentView, setCurrentView] = useState('calendar');\r\n\r\n  useEffect(() => {\r\n    fetchAvailableDates();\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchAvailableDates = async () => {\r\n    try {\r\n      const { data: finalShifts, error } = await supabase\r\n        .from('final_shifts')\r\n        .select('date')\r\n        .order('date');\r\n\r\n      if (error) {\r\n        console.error('日付取得エラー:', error);\r\n        return;\r\n      }\r\n\r\n      const uniqueDates = finalShifts ? [...new Set(finalShifts.map(item => item.date))].sort() : [];\r\n      setAvailableDates(uniqueDates);\r\n    } catch (error) {\r\n      console.error('日付取得エラー:', error);\r\n    }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const { data: users, error } = await supabase\r\n        .from('users')\r\n        .select('*');\r\n\r\n      if (error) {\r\n        console.error('ユーザー取得エラー:', error);\r\n        return;\r\n      }\r\n\r\n      const userMapTemp = {};\r\n      if (users && users.length > 0) {\r\n        users.forEach(user => {\r\n          const managerNumber = user.manager_number;\r\n          if (managerNumber !== null && managerNumber !== undefined) {\r\n            userMapTemp[String(managerNumber)] = user.name || `ユーザー${managerNumber}`;\r\n            userMapTemp[Number(managerNumber)] = user.name || `ユーザー${managerNumber}`;\r\n          }\r\n        });\r\n      }\r\n      setUserMap(userMapTemp);\r\n    } catch (error) {\r\n      console.error('予期しないエラー:', error);\r\n    }\r\n  };\r\n\r\n  const fetchAttendanceData = async (date) => {\r\n    if (!date) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const { data: finalShifts, error: shiftError } = await supabase\r\n        .from('final_shifts')\r\n        .select('*')\r\n        .eq('date', date)\r\n        .order('manager_number');\r\n\r\n      if (shiftError) {\r\n        console.error('シフトデータ取得エラー:', shiftError);\r\n        alert('シフトデータの取得に失敗しました');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const { data: existingAttendance, error: attendanceError } = await supabase\r\n        .from('attendance')\r\n        .select('*')\r\n        .eq('date', date);\r\n\r\n      if (attendanceError) {\r\n        console.error('勤怠データ取得エラー:', attendanceError);\r\n      }\r\n\r\n      const attendanceMap = {};\r\n      if (existingAttendance) {\r\n        existingAttendance.forEach(att => {\r\n          attendanceMap[att.manager_number] = att;\r\n        });\r\n      }\r\n\r\n      const data = finalShifts.map(shift => {\r\n        const existing = attendanceMap[shift.manager_number];\r\n        const isOff = shift.is_off || !shift.start_time || !shift.end_time ||\r\n                      (shift.start_time === '00:00' && shift.end_time === '00:00');\r\n        \r\n        const trimTime = (time) => time ? time.substring(0, 5) : '';\r\n\r\n        return {\r\n          manager_number: shift.manager_number,\r\n          name: userMap[shift.manager_number] || `管理番号: ${shift.manager_number}`,\r\n          scheduled_start: trimTime(shift.start_time),\r\n          scheduled_end: trimTime(shift.end_time),\r\n          actual_start: existing?.actual_start ? trimTime(existing.actual_start) : trimTime(shift.start_time),\r\n          actual_end: existing?.actual_end ? trimTime(existing.actual_end) : trimTime(shift.end_time),\r\n          break_minutes: existing?.break_minutes || 0,\r\n          store: shift.store || '',\r\n          is_off: isOff,\r\n          attendance_id: existing?.id || null\r\n        };\r\n      });\r\n\r\n      const sortedData = data.sort((a, b) => {\r\n        return a.is_off === b.is_off ? 0 : a.is_off ? 1 : -1;\r\n      });\r\n\r\n      setAttendanceData(sortedData);\r\n      setCurrentView('attendance');\r\n    } catch (error) {\r\n      console.error('データ取得エラー:', error);\r\n      alert('エラーが発生しました');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTimeChange = (index, field, value) => {\r\n    const cleanValue = value ? value.substring(0, 5) : '';\r\n    \r\n    const updated = [...attendanceData];\r\n    updated[index][field] = (field === 'break_minutes') ? Number(value) : cleanValue;\r\n    \r\n    setAttendanceData(updated); \r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    try {\r\n      for (const record of attendanceData) {\r\n        // 空の値をnullに変換\r\n        const actualStart = record.actual_start && record.actual_start !== '' ? record.actual_start : null;\r\n        const actualEnd = record.actual_end && record.actual_end !== '' ? record.actual_end : null;\r\n        \r\n        // 両方とも空の場合はスキップ\r\n        if (!actualStart && !actualEnd) {\r\n          continue;\r\n        }\r\n        \r\n        const workMinutes = calculateWorkMinutes(\r\n            actualStart, \r\n            actualEnd, \r\n            record.break_minutes\r\n        );\r\n\r\n        const attendanceRecord = {\r\n          date: selectedDate,\r\n          manager_number: record.manager_number,\r\n          actual_start: actualStart, \r\n          actual_end: actualEnd,     \r\n          break_minutes: record.break_minutes || 0,\r\n          work_minutes: workMinutes, \r\n          store: record.store\r\n        };\r\n\r\n        if (record.attendance_id) {\r\n          const { error } = await supabase\r\n            .from('attendance')\r\n            .update(attendanceRecord)\r\n            .eq('id', record.attendance_id);\r\n\r\n          if (error) {\r\n            console.error('更新エラー:', error);\r\n            alert(`${record.name} の更新に失敗しました: ${error.message}`);\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        } else {\r\n          const { error } = await supabase\r\n            .from('attendance')\r\n            .insert([attendanceRecord]);\r\n\r\n          if (error) {\r\n            console.error('挿入エラー:', error);\r\n            alert(`${record.name} の保存に失敗しました: ${error.message}`);\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      alert('保存しました');\r\n      fetchAttendanceData(selectedDate); \r\n    } catch (error) {\r\n      console.error('保存エラー:', error);\r\n      alert('保存中にエラーが発生しました');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDateSelect = (date) => {\r\n    if (!availableDates.includes(date)) return;\r\n    setSelectedDate(date);\r\n    fetchAttendanceData(date);\r\n  };\r\n\r\n  const handleBackToCalendar = () => {\r\n    setCurrentView('calendar');\r\n    setSelectedDate('');\r\n    setAttendanceData([]);\r\n  };\r\n\r\n  const changeDate = (delta) => {\r\n    if (!selectedDate || availableDates.length === 0) return;\r\n    const idx = availableDates.indexOf(selectedDate);\r\n    const newIdx = idx + delta;\r\n    if (newIdx >= 0 && newIdx < availableDates.length) {\r\n      const newDate = availableDates[newIdx];\r\n      setSelectedDate(newDate);\r\n      fetchAttendanceData(newDate);\r\n    }\r\n  };\r\n\r\n  const generateCalendarDays = () => {\r\n    const year = currentMonth.getFullYear();\r\n    const month = currentMonth.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const startDate = new Date(firstDay);\r\n    startDate.setDate(startDate.getDate() - firstDay.getDay());\r\n\r\n    const days = [];\r\n    const currentDate = new Date(startDate);\r\n\r\n    for (let i = 0; i < 42; i++) {\r\n      const dateStr = currentDate.toISOString().split('T')[0];\r\n      const isCurrentMonth = currentDate.getMonth() === month;\r\n      const hasShift = availableDates.includes(dateStr);\r\n\r\n      days.push({\r\n        date: new Date(currentDate),\r\n        dateStr: dateStr,\r\n        day: currentDate.getDate(),\r\n        isCurrentMonth,\r\n        hasShift\r\n      });\r\n\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n\r\n    return days;\r\n  };\r\n\r\n  const changeMonth = (delta) => {\r\n    const newMonth = new Date(currentMonth);\r\n    newMonth.setMonth(newMonth.getMonth() + delta);\r\n    setCurrentMonth(newMonth);\r\n  };\r\n\r\n  const getWeekday = (dateStr) => {\r\n    const days = ['日', '月', '火', '水', '木', '金', '土'];\r\n    const date = new Date(dateStr);\r\n    return days[date.getDay()];\r\n  };\r\n\r\n  const calendarDays = generateCalendarDays();\r\n  const weekdays = ['日', '月', '火', '水', '木', '金', '土'];\r\n\r\n\r\n// ----------------------------------------------------------------------\r\n// View Rendering\r\n// ----------------------------------------------------------------------\r\n\r\n  if (currentView === 'summary') {\r\n    return (\r\n      <div className=\"login-wrapper\">\r\n        <SummaryView \r\n          userMap={userMap} \r\n          availableDates={availableDates} \r\n          onBackToCalendar={handleBackToCalendar}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (currentView === 'calendar') {\r\n    return (\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-card\" style={{ width: '600px', maxWidth: '95vw', maxHeight: '90vh', overflowY: 'auto' }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n            <h2>勤怠管理</h2>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '1rem', display: 'flex', gap: '0.5rem', justifyContent: 'center' }}>\r\n            <button\r\n              onClick={() => setCurrentView('calendar')}\r\n              style={{\r\n                padding: '0.75rem 2rem',\r\n                backgroundColor: '#2196F3',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: 'not-allowed'\r\n              }}\r\n              disabled\r\n            >\r\n              退勤管理モード\r\n            </button>\r\n            <button\r\n              onClick={() => setCurrentView('summary')}\r\n              style={{\r\n                padding: '0.75rem 2rem',\r\n                backgroundColor: '#FF9800',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              勤務時間集計モード\r\n            </button>\r\n          </div>\r\n\r\n          <div style={{\r\n            marginTop: '1rem',\r\n            border: '1px solid #ddd',\r\n            borderRadius: '8px',\r\n            padding: '1rem',\r\n            backgroundColor: '#f9f9f9'\r\n          }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <button onClick={() => changeMonth(-1)} style={{\r\n                backgroundColor: '#607D8B',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                padding: '0.5rem',\r\n                cursor: 'pointer'\r\n              }}>\r\n                ◀\r\n              </button>\r\n              <h3 style={{ margin: 0 }}>\r\n                {currentMonth.getFullYear()}年 {currentMonth.getMonth() + 1}月\r\n              </h3>\r\n              <button onClick={() => changeMonth(1)} style={{\r\n                backgroundColor: '#607D8B',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                padding: '0.5rem',\r\n                cursor: 'pointer'\r\n              }}>\r\n                ▶\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(7, 1fr)',\r\n              gap: '2px',\r\n              marginBottom: '0.5rem'\r\n            }}>\r\n              {weekdays.map(day => (\r\n                <div key={day} style={{\r\n                  textAlign: 'center',\r\n                  fontWeight: 'bold',\r\n                  padding: '0.5rem',\r\n                  backgroundColor: '#e0e0e0'\r\n                }}>\r\n                  {day}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(7, 1fr)',\r\n              gap: '2px'\r\n            }}>\r\n              {calendarDays.map((dayInfo, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => dayInfo.hasShift && handleDateSelect(dayInfo.dateStr)}\r\n                  disabled={!dayInfo.hasShift}\r\n                  style={{\r\n                    padding: '0.5rem',\r\n                    border: 'none',\r\n                    borderRadius: '4px',\r\n                    cursor: dayInfo.hasShift ? 'pointer' : 'not-allowed',\r\n                    backgroundColor: dayInfo.hasShift ? '#E3F2FD' :\r\n                                   dayInfo.isCurrentMonth ? 'white' : '#f0f0f0',\r\n                    color: !dayInfo.hasShift ? '#999' :\r\n                           dayInfo.isCurrentMonth ? 'black' : '#666',\r\n                    fontWeight: dayInfo.hasShift ? 'bold' : 'normal',\r\n                    opacity: dayInfo.isCurrentMonth ? 1 : 0.5,\r\n                    transition: 'all 0.3s ease'\r\n                  }}\r\n                >\r\n                  {dayInfo.day}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop: '2rem', textAlign: 'center' }}>\r\n            <button onClick={onBack} style={{\r\n              backgroundColor: '#607D8B',\r\n              color: 'white',\r\n              padding: '0.75rem 2rem',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer'\r\n            }}>\r\n              メニューに戻る\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Attendance View (日別勤怠入力)\r\n  return (\r\n    <div className=\"login-wrapper\">\r\n      <div className=\"login-card\" style={{ width: '900px', maxWidth: '95vw', maxHeight: '90vh', overflowY: 'auto' }}>\r\n        <h2 style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem' }}>\r\n          <button onClick={() => changeDate(-1)}>◀</button>\r\n          {selectedDate} ({getWeekday(selectedDate)})\r\n          <button onClick={() => changeDate(1)}>▶</button>\r\n        </h2>\r\n        <p style={{ textAlign: 'center', color: '#666' }}>\r\n          モード: <strong>退勤管理</strong>\r\n        </p>\r\n\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center', padding: '2rem' }}>読み込み中...</div>\r\n        ) : (\r\n          <div style={{\r\n            border: '1px solid #ddd',\r\n            borderRadius: '8px',\r\n            overflow: 'auto',\r\n            maxHeight: '500px'\r\n          }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n              <thead style={{ position: 'sticky', top: 0, backgroundColor: '#f5f5f5' }}>\r\n                <tr>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>名前</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>店舗</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>予定開始</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>予定終了</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>実際開始</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>実際終了</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>休憩(分)</th>\r\n                  <th style={{ padding: '0.75rem', borderBottom: '1px solid #ddd' }}>労働時間</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {attendanceData.map((record, index) => {\r\n                    const workMinutes = calculateWorkMinutes(\r\n                        record.actual_start,\r\n                        record.actual_end,\r\n                        record.break_minutes\r\n                    );\r\n                    \r\n                    const rowBackgroundColor = record.is_off \r\n                        ? '#f0f0f0' \r\n                        : (index % 2 === 0 ? 'white' : '#e8f5e9');\r\n                        \r\n                  return (\r\n                    <tr key={index} style={{\r\n                      backgroundColor: rowBackgroundColor\r\n                    }}>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee' }}>\r\n                        {record.name}\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'center' }}>\r\n                        {record.store}店舗\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'center' }}>\r\n                        {record.is_off ? <span style={{ color: '#999' }}>休み</span> : record.scheduled_start}\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'center' }}>\r\n                        {record.is_off ? <span style={{ color: '#999' }}>休み</span> : record.scheduled_end}\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee' }}>\r\n                        <select\r\n                          value={record.actual_start}\r\n                          onChange={(e) => handleTimeChange(index, 'actual_start', e.target.value)}\r\n                          style={{ width: '100px', padding: '0.25rem' }}\r\n                        >\r\n                          <option value=\"\">--:--</option>\r\n                          {Array.from({ length: 36 }, (_, i) => {\r\n                            const timeStr = `${String(i).padStart(2, '0')}:00`;\r\n                            return <option key={timeStr} value={timeStr}>{timeStr}</option>;\r\n                          })}\r\n                        </select>\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee' }}>\r\n                        <select\r\n                          value={record.actual_end}\r\n                          onChange={(e) => handleTimeChange(index, 'actual_end', e.target.value)}\r\n                          style={{ width: '100px', padding: '0.25rem' }}\r\n                        >\r\n                          <option value=\"\">--:--</option>\r\n                          {Array.from({ length: 36 }, (_, i) => {\r\n                            const timeStr = `${String(i).padStart(2, '0')}:00`;\r\n                            return <option key={timeStr} value={timeStr}>{timeStr}</option>;\r\n                          })}\r\n                        </select>\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee' }}>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={record.break_minutes}\r\n                          onChange={(e) => handleTimeChange(index, 'break_minutes', e.target.value)}\r\n                          style={{ width: '60px', padding: '0.25rem' }}\r\n                        />\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem', borderBottom: '1px solid #eee', textAlign: 'center', fontWeight: 'bold' }}>\r\n                        {workMinutes > 0 ? formatMinutes(workMinutes) : '-'}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ marginTop: '1rem', display: 'flex', gap: '1rem', justifyContent: 'center' }}>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={loading}\r\n            style={{\r\n              backgroundColor: '#4CAF50',\r\n              color: 'white',\r\n              padding: '0.75rem 2rem',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: loading ? 'not-allowed' : 'pointer',\r\n              opacity: loading ? 0.6 : 1\r\n            }}\r\n          >\r\n            {loading ? '保存中...' : '確定'}\r\n          </button>\r\n          <button onClick={handleBackToCalendar} style={{\r\n            backgroundColor: '#607D8B',\r\n            color: 'white',\r\n            padding: '0.75rem 2rem',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer'\r\n          }}>\r\n            カレンダーに戻る\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManagerAttendance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}