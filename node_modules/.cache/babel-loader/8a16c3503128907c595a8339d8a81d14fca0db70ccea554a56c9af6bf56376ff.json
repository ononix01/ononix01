{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kouki\\\\my-app\\\\src\\\\ClockInInput.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\n\n// 時刻を24時以降の形式で表示（例: 25:00, 26:30）\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatExtendedTime = (timeStr, workDate) => {\n  if (!timeStr || !workDate) return timeStr;\n  const [hours, minutes] = timeStr.split(':').map(Number);\n  const workDateObj = new Date(workDate);\n  const currentDate = new Date();\n\n  // 現在の日付と勤務日を比較\n  const daysDiff = Math.floor((currentDate - workDateObj) / (1000 * 60 * 60 * 24));\n\n  // 日をまたいでいる場合は時間に24を加算\n  if (daysDiff > 0 && hours < 12) {\n    // 深夜帯と判断（12時より前）\n    const extendedHours = hours + 24 * daysDiff;\n    return `${extendedHours}:${String(minutes).padStart(2, '0')}`;\n  }\n  return timeStr;\n};\n\n// 拡張時刻（25:00など）を通常の時刻に変換\nconst normalizeExtendedTime = extendedTimeStr => {\n  if (!extendedTimeStr) return '';\n  const [hours, minutes] = extendedTimeStr.split(':').map(Number);\n  const normalizedHours = hours % 24;\n  return `${String(normalizedHours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\n};\nfunction ClockInInput({\n  onBack\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const [mode, setMode] = useState('clockin'); // 'clockin' or 'clockout'\n  const [managerNumber, setManagerNumber] = useState('');\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState(''); // 'success' or 'error'\n  const [userMap, setUserMap] = useState({});\n  const [currentDateTime, setCurrentDateTime] = useState('');\n\n  // 初期表示時に日時を設定\n  useEffect(() => {\n    updateDateTime();\n  }, []);\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchUsers();\n      const interval = setInterval(updateDateTime, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [isAuthenticated]);\n  const updateDateTime = () => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    setCurrentDateTime(`${year}年${month}月${day}日 ${hours}:${minutes}:${seconds}`);\n  };\n  const fetchUsers = async () => {\n    try {\n      const {\n        data: users,\n        error\n      } = await supabase.from('users').select('*');\n      if (error) {\n        console.error('ユーザー取得エラー:', error);\n        return;\n      }\n      const userMapTemp = {};\n      if (users && users.length > 0) {\n        users.forEach(user => {\n          const mn = user.manager_number;\n          if (mn !== null && mn !== undefined) {\n            userMapTemp[String(mn)] = user.name || `ユーザー${mn}`;\n          }\n        });\n      }\n      setUserMap(userMapTemp);\n    } catch (error) {\n      console.error('予期しないエラー:', error);\n    }\n  };\n  const handlePasswordSubmit = () => {\n    if (password === '0306') {\n      setIsAuthenticated(true);\n      setPasswordError('');\n    } else {\n      setPasswordError('パスワードが違います');\n    }\n  };\n  const getCurrentTimeString = () => {\n    const now = new Date();\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    return `${hours}:${minutes}`;\n  };\n  const getTodayDateString = () => {\n    const now = new Date();\n    // タイムゾーンを考慮してローカル日付を取得\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n  const handleSubmit = async () => {\n    if (!managerNumber.trim()) {\n      setMessage('管理番号を入力してください');\n      setMessageType('error');\n      return;\n    }\n\n    // 管理番号の存在確認\n    if (!userMap[String(managerNumber)]) {\n      setMessage('番号が間違っています');\n      setMessageType('error');\n      return;\n    }\n    const currentTime = getCurrentTimeString();\n    const todayDate = getTodayDateString();\n    try {\n      if (mode === 'clockin') {\n        // 出勤入力\n        // すでに同じ管理番号・日付のレコードがあるか確認\n        const {\n          data: existingList,\n          error: fetchError\n        } = await supabase.from('attendance').select('*').eq('manager_number', managerNumber).eq('date', todayDate);\n        if (fetchError) {\n          console.error('既存データ確認エラー:', fetchError);\n          setMessage('エラーが発生しました');\n          setMessageType('error');\n          return;\n        }\n        if (existingList && existingList.length > 0) {\n          // 上書き\n          const {\n            error: updateError\n          } = await supabase.from('attendance').update({\n            actual_start: currentTime\n          }).eq('id', existingList[0].id);\n          if (updateError) {\n            console.error('出勤更新エラー:', updateError);\n            setMessage('エラーが発生しました');\n            setMessageType('error');\n            return;\n          }\n        } else {\n          // 新規作成\n          const {\n            error: insertError\n          } = await supabase.from('attendance').insert([{\n            date: todayDate,\n            manager_number: managerNumber,\n            actual_start: currentTime,\n            actual_end: null,\n            break_minutes: 0,\n            work_minutes: 0,\n            store: ''\n          }]);\n          if (insertError) {\n            console.error('出勤登録エラー:', insertError);\n            setMessage('エラーが発生しました');\n            setMessageType('error');\n            return;\n          }\n        }\n        setMessage('出勤を記録しました');\n        setMessageType('success');\n      } else {\n        // 退勤入力\n        // 出勤記録を探す（今日または昨日）\n        const now = new Date();\n        const yesterday = new Date(now);\n        yesterday.setDate(yesterday.getDate() - 1);\n        const year = yesterday.getFullYear();\n        const month = String(yesterday.getMonth() + 1).padStart(2, '0');\n        const day = String(yesterday.getDate()).padStart(2, '0');\n        const yesterdayDate = `${year}-${month}-${day}`;\n        let clockInRecord = null;\n\n        // まず今日の出勤記録を確認\n        const {\n          data: todayRecords,\n          error: todayError\n        } = await supabase.from('attendance').select('*').eq('manager_number', managerNumber).eq('date', todayDate);\n        console.log('今日のレコード確認:', {\n          todayRecords,\n          todayError,\n          todayDate\n        });\n        if (!todayError && todayRecords && todayRecords.length > 0) {\n          const record = todayRecords[0];\n          if (record.actual_start) {\n            clockInRecord = record;\n            console.log('今日の出勤記録を使用:', clockInRecord);\n          }\n        }\n\n        // 今日のレコードがなければ昨日を確認\n        if (!clockInRecord) {\n          const {\n            data: yesterdayRecords,\n            error: yesterdayError\n          } = await supabase.from('attendance').select('*').eq('manager_number', managerNumber).eq('date', yesterdayDate);\n          console.log('昨日のレコード確認:', {\n            yesterdayRecords,\n            yesterdayError,\n            yesterdayDate\n          });\n          if (!yesterdayError && yesterdayRecords && yesterdayRecords.length > 0) {\n            const record = yesterdayRecords[0];\n            if (record.actual_start) {\n              clockInRecord = record;\n              console.log('昨日の出勤記録を使用:', clockInRecord);\n            }\n          }\n        }\n        if (!clockInRecord) {\n          console.error('出勤記録が見つかりませんでした');\n          setMessage('出勤記録が見つかりません');\n          setMessageType('error');\n          return;\n        }\n\n        // 退勤時刻を更新（既に退勤時刻がある場合も上書き）\n        console.log('退勤時刻を更新:', {\n          id: clockInRecord.id,\n          currentTime\n        });\n        const {\n          error: updateError\n        } = await supabase.from('attendance').update({\n          actual_end: currentTime\n        }).eq('id', clockInRecord.id);\n        if (updateError) {\n          console.error('退勤更新エラー:', updateError);\n          setMessage('エラーが発生しました: ' + updateError.message);\n          setMessageType('error');\n          return;\n        }\n        console.log('退勤記録成功');\n        setMessage('退勤を記録しました');\n        setMessageType('success');\n      }\n\n      // 入力欄をクリア\n      setManagerNumber('');\n\n      // メッセージを3秒後に消す\n      setTimeout(() => {\n        setMessage('');\n        setMessageType('');\n      }, 3000);\n    } catch (error) {\n      console.error('送信エラー:', error);\n      setMessage('エラーが発生しました');\n      setMessageType('error');\n    }\n  };\n\n  // パスワード認証画面\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u9000\\u52E4\\u5165\\u529B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginBottom: '1rem',\n            color: '#666'\n          },\n          children: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          onKeyPress: e => {\n            if (e.key === 'Enter') {\n              handlePasswordSubmit();\n            }\n          },\n          style: {\n            width: '100%',\n            padding: '0.75rem',\n            fontSize: '1rem',\n            border: '2px solid #ddd',\n            borderRadius: '4px',\n            marginBottom: '1rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePasswordSubmit,\n          style: {\n            width: '100%',\n            padding: '0.75rem',\n            backgroundColor: '#2196F3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            fontSize: '1rem',\n            fontWeight: 'bold',\n            cursor: 'pointer',\n            marginBottom: '0.5rem'\n          },\n          children: \"\\u8A8D\\u8A3C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), passwordError && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#F44336',\n            fontSize: '0.9rem',\n            marginTop: '0.5rem'\n          },\n          children: passwordError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onBack,\n          style: {\n            width: '100%',\n            padding: '0.75rem',\n            backgroundColor: '#607D8B',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            fontSize: '1rem',\n            cursor: 'pointer',\n            marginTop: '1rem'\n          },\n          children: \"\\u623B\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this);\n  }\n\n  // メイン入力画面\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-card\",\n      style: {\n        width: '500px',\n        maxWidth: '95vw'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u9000\\u52E4\\u5165\\u529B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '1rem',\n          backgroundColor: '#f5f5f5',\n          borderRadius: '8px',\n          marginBottom: '2rem',\n          fontSize: '1.2rem',\n          fontWeight: 'bold',\n          color: '#333'\n        },\n        children: currentDateTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '1rem',\n          marginBottom: '2rem',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('clockin'),\n          style: {\n            flex: 1,\n            padding: '1rem',\n            backgroundColor: mode === 'clockin' ? '#4CAF50' : '#E0E0E0',\n            color: mode === 'clockin' ? 'white' : '#999',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '1.1rem',\n            fontWeight: 'bold',\n            cursor: 'pointer',\n            transition: 'all 0.3s ease'\n          },\n          children: \"\\u51FA\\u52E4\\u5165\\u529B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('clockout'),\n          style: {\n            flex: 1,\n            padding: '1rem',\n            backgroundColor: mode === 'clockout' ? '#2196F3' : '#E0E0E0',\n            color: mode === 'clockout' ? 'white' : '#999',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '1.1rem',\n            fontWeight: 'bold',\n            cursor: 'pointer',\n            transition: 'all 0.3s ease'\n          },\n          children: \"\\u9000\\u52E4\\u5165\\u529B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '0.5rem',\n            fontWeight: 'bold',\n            fontSize: '1rem'\n          },\n          children: \"\\u7BA1\\u7406\\u756A\\u53F7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: managerNumber,\n          onChange: e => setManagerNumber(e.target.value),\n          onKeyPress: e => {\n            if (e.key === 'Enter') {\n              handleSubmit();\n            }\n          },\n          placeholder: \"\\u7BA1\\u7406\\u756A\\u53F7\\u3092\\u5165\\u529B\",\n          style: {\n            width: '100%',\n            padding: '0.75rem',\n            fontSize: '1.2rem',\n            border: '2px solid #ddd',\n            borderRadius: '4px',\n            textAlign: 'center',\n            fontWeight: 'bold'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        style: {\n          width: '100%',\n          padding: '1rem',\n          backgroundColor: mode === 'clockin' ? '#4CAF50' : '#2196F3',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '1.2rem',\n          fontWeight: 'bold',\n          cursor: 'pointer',\n          marginBottom: '1rem'\n        },\n        children: \"\\u9001\\u4FE1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1rem',\n          backgroundColor: messageType === 'success' ? '#E8F5E9' : '#FFEBEE',\n          color: messageType === 'success' ? '#2E7D32' : '#C62828',\n          borderRadius: '4px',\n          marginBottom: '1rem',\n          textAlign: 'center',\n          fontWeight: 'bold',\n          fontSize: '1.1rem'\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onBack,\n        style: {\n          width: '100%',\n          padding: '0.75rem',\n          backgroundColor: '#607D8B',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '1rem',\n          cursor: 'pointer'\n        },\n        children: \"\\u30E1\\u30CB\\u30E5\\u30FC\\u306B\\u623B\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n}\n_s(ClockInInput, \"ZBLW070U3LQjGoH+7XgmCAeev1M=\");\n_c = ClockInInput;\nexport default ClockInInput;\nvar _c;\n$RefreshReg$(_c, \"ClockInInput\");","map":{"version":3,"names":["React","useState","useEffect","supabase","jsxDEV","_jsxDEV","formatExtendedTime","timeStr","workDate","hours","minutes","split","map","Number","workDateObj","Date","currentDate","daysDiff","Math","floor","extendedHours","String","padStart","normalizeExtendedTime","extendedTimeStr","normalizedHours","ClockInInput","onBack","_s","isAuthenticated","setIsAuthenticated","password","setPassword","passwordError","setPasswordError","mode","setMode","managerNumber","setManagerNumber","message","setMessage","messageType","setMessageType","userMap","setUserMap","currentDateTime","setCurrentDateTime","updateDateTime","fetchUsers","interval","setInterval","clearInterval","now","year","getFullYear","month","getMonth","day","getDate","getHours","getMinutes","seconds","getSeconds","data","users","error","from","select","console","userMapTemp","length","forEach","user","mn","manager_number","undefined","name","handlePasswordSubmit","getCurrentTimeString","getTodayDateString","handleSubmit","trim","currentTime","todayDate","existingList","fetchError","eq","updateError","update","actual_start","id","insertError","insert","date","actual_end","break_minutes","work_minutes","store","yesterday","setDate","yesterdayDate","clockInRecord","todayRecords","todayError","log","record","yesterdayRecords","yesterdayError","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","color","type","placeholder","value","onChange","e","target","onKeyPress","key","width","padding","fontSize","border","borderRadius","onClick","backgroundColor","fontWeight","cursor","marginTop","maxWidth","textAlign","display","gap","justifyContent","flex","transition","_c","$RefreshReg$"],"sources":["C:/Users/kouki/my-app/src/ClockInInput.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\n\r\n// 時刻を24時以降の形式で表示（例: 25:00, 26:30）\r\nconst formatExtendedTime = (timeStr, workDate) => {\r\n  if (!timeStr || !workDate) return timeStr;\r\n  \r\n  const [hours, minutes] = timeStr.split(':').map(Number);\r\n  const workDateObj = new Date(workDate);\r\n  const currentDate = new Date();\r\n  \r\n  // 現在の日付と勤務日を比較\r\n  const daysDiff = Math.floor((currentDate - workDateObj) / (1000 * 60 * 60 * 24));\r\n  \r\n  // 日をまたいでいる場合は時間に24を加算\r\n  if (daysDiff > 0 && hours < 12) { // 深夜帯と判断（12時より前）\r\n    const extendedHours = hours + (24 * daysDiff);\r\n    return `${extendedHours}:${String(minutes).padStart(2, '0')}`;\r\n  }\r\n  \r\n  return timeStr;\r\n};\r\n\r\n// 拡張時刻（25:00など）を通常の時刻に変換\r\nconst normalizeExtendedTime = (extendedTimeStr) => {\r\n  if (!extendedTimeStr) return '';\r\n  \r\n  const [hours, minutes] = extendedTimeStr.split(':').map(Number);\r\n  const normalizedHours = hours % 24;\r\n  return `${String(normalizedHours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\r\n};\r\n\r\nfunction ClockInInput({ onBack }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [password, setPassword] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [mode, setMode] = useState('clockin'); // 'clockin' or 'clockout'\r\n  const [managerNumber, setManagerNumber] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messageType, setMessageType] = useState(''); // 'success' or 'error'\r\n  const [userMap, setUserMap] = useState({});\r\n  const [currentDateTime, setCurrentDateTime] = useState('');\r\n\r\n  // 初期表示時に日時を設定\r\n  useEffect(() => {\r\n    updateDateTime();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      fetchUsers();\r\n      const interval = setInterval(updateDateTime, 1000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  const updateDateTime = () => {\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = String(now.getMonth() + 1).padStart(2, '0');\r\n    const day = String(now.getDate()).padStart(2, '0');\r\n    const hours = String(now.getHours()).padStart(2, '0');\r\n    const minutes = String(now.getMinutes()).padStart(2, '0');\r\n    const seconds = String(now.getSeconds()).padStart(2, '0');\r\n    setCurrentDateTime(`${year}年${month}月${day}日 ${hours}:${minutes}:${seconds}`);\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const { data: users, error } = await supabase\r\n        .from('users')\r\n        .select('*');\r\n\r\n      if (error) {\r\n        console.error('ユーザー取得エラー:', error);\r\n        return;\r\n      }\r\n\r\n      const userMapTemp = {};\r\n      if (users && users.length > 0) {\r\n        users.forEach(user => {\r\n          const mn = user.manager_number;\r\n          if (mn !== null && mn !== undefined) {\r\n            userMapTemp[String(mn)] = user.name || `ユーザー${mn}`;\r\n          }\r\n        });\r\n      }\r\n      setUserMap(userMapTemp);\r\n    } catch (error) {\r\n      console.error('予期しないエラー:', error);\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = () => {\r\n    if (password === '0306') {\r\n      setIsAuthenticated(true);\r\n      setPasswordError('');\r\n    } else {\r\n      setPasswordError('パスワードが違います');\r\n    }\r\n  };\r\n\r\n  const getCurrentTimeString = () => {\r\n    const now = new Date();\r\n    const hours = String(now.getHours()).padStart(2, '0');\r\n    const minutes = String(now.getMinutes()).padStart(2, '0');\r\n    return `${hours}:${minutes}`;\r\n  };\r\n\r\n  const getTodayDateString = () => {\r\n    const now = new Date();\r\n    // タイムゾーンを考慮してローカル日付を取得\r\n    const year = now.getFullYear();\r\n    const month = String(now.getMonth() + 1).padStart(2, '0');\r\n    const day = String(now.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!managerNumber.trim()) {\r\n      setMessage('管理番号を入力してください');\r\n      setMessageType('error');\r\n      return;\r\n    }\r\n\r\n    // 管理番号の存在確認\r\n    if (!userMap[String(managerNumber)]) {\r\n      setMessage('番号が間違っています');\r\n      setMessageType('error');\r\n      return;\r\n    }\r\n\r\n    const currentTime = getCurrentTimeString();\r\n    const todayDate = getTodayDateString();\r\n\r\n    try {\r\n      if (mode === 'clockin') {\r\n        // 出勤入力\r\n        // すでに同じ管理番号・日付のレコードがあるか確認\r\n        const { data: existingList, error: fetchError } = await supabase\r\n          .from('attendance')\r\n          .select('*')\r\n          .eq('manager_number', managerNumber)\r\n          .eq('date', todayDate);\r\n\r\n        if (fetchError) {\r\n          console.error('既存データ確認エラー:', fetchError);\r\n          setMessage('エラーが発生しました');\r\n          setMessageType('error');\r\n          return;\r\n        }\r\n\r\n        if (existingList && existingList.length > 0) {\r\n          // 上書き\r\n          const { error: updateError } = await supabase\r\n            .from('attendance')\r\n            .update({\r\n              actual_start: currentTime\r\n            })\r\n            .eq('id', existingList[0].id);\r\n\r\n          if (updateError) {\r\n            console.error('出勤更新エラー:', updateError);\r\n            setMessage('エラーが発生しました');\r\n            setMessageType('error');\r\n            return;\r\n          }\r\n        } else {\r\n          // 新規作成\r\n          const { error: insertError } = await supabase\r\n            .from('attendance')\r\n            .insert([{\r\n              date: todayDate,\r\n              manager_number: managerNumber,\r\n              actual_start: currentTime,\r\n              actual_end: null,\r\n              break_minutes: 0,\r\n              work_minutes: 0,\r\n              store: ''\r\n            }]);\r\n\r\n          if (insertError) {\r\n            console.error('出勤登録エラー:', insertError);\r\n            setMessage('エラーが発生しました');\r\n            setMessageType('error');\r\n            return;\r\n          }\r\n        }\r\n\r\n        setMessage('出勤を記録しました');\r\n        setMessageType('success');\r\n      } else {\r\n        // 退勤入力\r\n        // 出勤記録を探す（今日または昨日）\r\n        const now = new Date();\r\n        const yesterday = new Date(now);\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        const year = yesterday.getFullYear();\r\n        const month = String(yesterday.getMonth() + 1).padStart(2, '0');\r\n        const day = String(yesterday.getDate()).padStart(2, '0');\r\n        const yesterdayDate = `${year}-${month}-${day}`;\r\n\r\n        let clockInRecord = null;\r\n        \r\n        // まず今日の出勤記録を確認\r\n        const { data: todayRecords, error: todayError } = await supabase\r\n          .from('attendance')\r\n          .select('*')\r\n          .eq('manager_number', managerNumber)\r\n          .eq('date', todayDate);\r\n\r\n        console.log('今日のレコード確認:', { todayRecords, todayError, todayDate });\r\n\r\n        if (!todayError && todayRecords && todayRecords.length > 0) {\r\n          const record = todayRecords[0];\r\n          if (record.actual_start) {\r\n            clockInRecord = record;\r\n            console.log('今日の出勤記録を使用:', clockInRecord);\r\n          }\r\n        }\r\n        \r\n        // 今日のレコードがなければ昨日を確認\r\n        if (!clockInRecord) {\r\n          const { data: yesterdayRecords, error: yesterdayError } = await supabase\r\n            .from('attendance')\r\n            .select('*')\r\n            .eq('manager_number', managerNumber)\r\n            .eq('date', yesterdayDate);\r\n\r\n          console.log('昨日のレコード確認:', { yesterdayRecords, yesterdayError, yesterdayDate });\r\n\r\n          if (!yesterdayError && yesterdayRecords && yesterdayRecords.length > 0) {\r\n            const record = yesterdayRecords[0];\r\n            if (record.actual_start) {\r\n              clockInRecord = record;\r\n              console.log('昨日の出勤記録を使用:', clockInRecord);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!clockInRecord) {\r\n          console.error('出勤記録が見つかりませんでした');\r\n          setMessage('出勤記録が見つかりません');\r\n          setMessageType('error');\r\n          return;\r\n        }\r\n\r\n        // 退勤時刻を更新（既に退勤時刻がある場合も上書き）\r\n        console.log('退勤時刻を更新:', { id: clockInRecord.id, currentTime });\r\n        const { error: updateError } = await supabase\r\n          .from('attendance')\r\n          .update({\r\n            actual_end: currentTime\r\n          })\r\n          .eq('id', clockInRecord.id);\r\n\r\n        if (updateError) {\r\n          console.error('退勤更新エラー:', updateError);\r\n          setMessage('エラーが発生しました: ' + updateError.message);\r\n          setMessageType('error');\r\n          return;\r\n        }\r\n\r\n        console.log('退勤記録成功');\r\n        setMessage('退勤を記録しました');\r\n        setMessageType('success');\r\n      }\r\n\r\n      // 入力欄をクリア\r\n      setManagerNumber('');\r\n      \r\n      // メッセージを3秒後に消す\r\n      setTimeout(() => {\r\n        setMessage('');\r\n        setMessageType('');\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error('送信エラー:', error);\r\n      setMessage('エラーが発生しました');\r\n      setMessageType('error');\r\n    }\r\n  };\r\n\r\n  // パスワード認証画面\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-card\">\r\n          <h2>退勤入力</h2>\r\n          <p style={{ marginBottom: '1rem', color: '#666' }}>パスワードを入力してください</p>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"パスワード\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') {\r\n                handlePasswordSubmit();\r\n              }\r\n            }}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.75rem',\r\n              fontSize: '1rem',\r\n              border: '2px solid #ddd',\r\n              borderRadius: '4px',\r\n              marginBottom: '1rem'\r\n            }}\r\n          />\r\n          <button\r\n            onClick={handlePasswordSubmit}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.75rem',\r\n              backgroundColor: '#2196F3',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              fontSize: '1rem',\r\n              fontWeight: 'bold',\r\n              cursor: 'pointer',\r\n              marginBottom: '0.5rem'\r\n            }}\r\n          >\r\n            認証\r\n          </button>\r\n          {passwordError && (\r\n            <p style={{ color: '#F44336', fontSize: '0.9rem', marginTop: '0.5rem' }}>\r\n              {passwordError}\r\n            </p>\r\n          )}\r\n          <button\r\n            onClick={onBack}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.75rem',\r\n              backgroundColor: '#607D8B',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              fontSize: '1rem',\r\n              cursor: 'pointer',\r\n              marginTop: '1rem'\r\n            }}\r\n          >\r\n            戻る\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // メイン入力画面\r\n  return (\r\n    <div className=\"login-wrapper\">\r\n      <div className=\"login-card\" style={{ width: '500px', maxWidth: '95vw' }}>\r\n        <h2>退勤入力</h2>\r\n\r\n        {/* 現在の日時表示 */}\r\n        <div style={{\r\n          textAlign: 'center',\r\n          padding: '1rem',\r\n          backgroundColor: '#f5f5f5',\r\n          borderRadius: '8px',\r\n          marginBottom: '2rem',\r\n          fontSize: '1.2rem',\r\n          fontWeight: 'bold',\r\n          color: '#333'\r\n        }}>\r\n          {currentDateTime}\r\n        </div>\r\n\r\n        {/* モード選択ボタン */}\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '1rem',\r\n          marginBottom: '2rem',\r\n          justifyContent: 'center'\r\n        }}>\r\n          <button\r\n            onClick={() => setMode('clockin')}\r\n            style={{\r\n              flex: 1,\r\n              padding: '1rem',\r\n              backgroundColor: mode === 'clockin' ? '#4CAF50' : '#E0E0E0',\r\n              color: mode === 'clockin' ? 'white' : '#999',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '1.1rem',\r\n              fontWeight: 'bold',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.3s ease'\r\n            }}\r\n          >\r\n            出勤入力\r\n          </button>\r\n          <button\r\n            onClick={() => setMode('clockout')}\r\n            style={{\r\n              flex: 1,\r\n              padding: '1rem',\r\n              backgroundColor: mode === 'clockout' ? '#2196F3' : '#E0E0E0',\r\n              color: mode === 'clockout' ? 'white' : '#999',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '1.1rem',\r\n              fontWeight: 'bold',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.3s ease'\r\n            }}\r\n          >\r\n            退勤入力\r\n          </button>\r\n        </div>\r\n\r\n        {/* 管理番号入力 */}\r\n        <div style={{ marginBottom: '1.5rem' }}>\r\n          <label style={{\r\n            display: 'block',\r\n            marginBottom: '0.5rem',\r\n            fontWeight: 'bold',\r\n            fontSize: '1rem'\r\n          }}>\r\n            管理番号\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={managerNumber}\r\n            onChange={(e) => setManagerNumber(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') {\r\n                handleSubmit();\r\n              }\r\n            }}\r\n            placeholder=\"管理番号を入力\"\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.75rem',\r\n              fontSize: '1.2rem',\r\n              border: '2px solid #ddd',\r\n              borderRadius: '4px',\r\n              textAlign: 'center',\r\n              fontWeight: 'bold'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* 送信ボタン */}\r\n        <button\r\n          onClick={handleSubmit}\r\n          style={{\r\n            width: '100%',\r\n            padding: '1rem',\r\n            backgroundColor: mode === 'clockin' ? '#4CAF50' : '#2196F3',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            fontSize: '1.2rem',\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n            marginBottom: '1rem'\r\n          }}\r\n        >\r\n          送信\r\n        </button>\r\n\r\n        {/* メッセージ表示 */}\r\n        {message && (\r\n          <div style={{\r\n            padding: '1rem',\r\n            backgroundColor: messageType === 'success' ? '#E8F5E9' : '#FFEBEE',\r\n            color: messageType === 'success' ? '#2E7D32' : '#C62828',\r\n            borderRadius: '4px',\r\n            marginBottom: '1rem',\r\n            textAlign: 'center',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.1rem'\r\n          }}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        {/* 戻るボタン */}\r\n        <button\r\n          onClick={onBack}\r\n          style={{\r\n            width: '100%',\r\n            padding: '0.75rem',\r\n            backgroundColor: '#607D8B',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            fontSize: '1rem',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          メニューに戻る\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClockInInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}